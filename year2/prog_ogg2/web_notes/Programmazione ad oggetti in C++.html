<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2024-04-23_Programmazione ad oggetti in C++</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#programmazione-ad-oggetti-in-c">Programmazione ad oggetti in C++</a>
<ul>
<li><a href="#costruttori">Costruttori</a></li>
<li><a href="#passaggio-dei-parametri-valore-e-reference">Passaggio dei parametri, valore e reference</a></li>
<li><a href="#copy-constructor">Copy constructor</a></li>
<li><a href="#this">This</a></li>
<li><a href="#const">Const</a></li>
<li><a href="#virtual">Virtual</a></li>
<li><a href="#ereditarietà">Ereditarietà</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="programmazione-ad-oggetti-in-c">Programmazione ad oggetti in C++</h1>
<p>C++ è un linguaggio fortemente tipato capace di supportare</p>
<ul>
<li>programmazione funzionale</li>
<li>programmazione ad oggetti</li>
<li>programmazione generica</li>
</ul>
<p>Utilizza una convenzione di stile di tipo <em>snake_case</em></p>
<p>La definizione di nuovi tipi di dato può avvenire con due parole chiave: <code>struct</code> e <code>class</code>.</p>
<p>La differenza tra la due è la visibilità di default:</p>
<ul>
<li><code>struct</code> la visibilità di default del suo contenuto è <code>public</code></li>
<li><code>class</code> la visibilità di default del suo contenuto è <code>private</code></li>
</ul>
<p>Le uniche visibilità presenti in C++ sono le seguenti:</p>
<ul>
<li><strong>public</strong>: visibile a chiunque</li>
<li><strong>protected</strong>: visibile solo all’interno della classe e ai propri figli</li>
<li><strong>private</strong>: visibile solo all’interno della classe</li>
</ul>
<h2 id="costruttori">Costruttori</h2>
<p>I costruttori vanno realizzati con le <strong>liste di inizializzazione</strong> quando possibile:</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">animal</span><span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> weight<span class="token punctuation">;</span>
	<span class="token keyword">int</span> speed<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>		<span class="token comment">//senza lista di inizalizzazione</span>
		weight <span class="token operator">=</span>  <span class="token number">10</span><span class="token punctuation">;</span>
		speed <span class="token operator">=</span>  <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">weight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">//con lista di inizializzazione</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Entrambi i costruttori fanno la stessa cosa, il secondo però fa utilizzo delle liste di inizializzazione.</p>
<p>L’utilizzo delle liste di inizializzazione è consigliato per due motivi principali:</p>
<ul>
<li>
<p><strong>Ottimizzazione</strong>: Nel primo caso quando viene chiamato il costruttore prima vengono create le variabile inizializzate con il loro valore di default e successivamente gli vengono assegnati i valori da noi decisi.<br>
Nel secondo caso invece le variabili vengono dichiarate e inizializzate direttamente con i valori da noi decisi.</p>
</li>
<li>
<p><strong>Inizializzazione di costanti</strong>: se nel codice di prima al posto di  <code>int a</code>  fosse stato  <code>const int a</code>  in quel caso solo il secondo metodo funzionerebbe.</p>
</li>
</ul>
<h2 id="passaggio-dei-parametri-valore-e-reference">Passaggio dei parametri, valore e reference</h2>
<p>Vediamo 3 modi in cui si può passare un oggetto ad una funzione</p>
<ul>
<li>passaggio per copia: viene creato un nuovo oggetto creato tramite il <strong>copy constructor</strong> dell’oggetto originale<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">void</span> <span class="token function">f</span> <span class="token punctuation">(</span>my_obj<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</li>
<li>passaggio del puntatore: viene passata la copia del puntatore dell’oggetto<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">void</span> <span class="token function">f</span> <span class="token punctuation">(</span>my_obj<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</li>
<li>passaggio della reference: viene passato la reference, cioè un alias, della variabile originale. In questo caso si sta usando direttamente l’oggetto originale<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">void</span> <span class="token function">f</span> <span class="token punctuation">(</span>my_obj<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</li>
</ul>
<h2 id="copy-constructor">Copy constructor</h2>
<p>Il copy constructor è un costruttore che utilizza una altro oggetto gemello inizializzare i propri valori con i suoi.</p>
<p>Si realizza nel seguente modo</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">animal</span><span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> weight<span class="token punctuation">;</span>
	<span class="token keyword">int</span> speed<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">weight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">//constructor</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token keyword">const</span> animal<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token function">weight</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>	<span class="token comment">//copy constructor</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Il <code>const</code> sta ad indicare che il parametro non viene modificato all’interno della funzione<br>
la reference è necessaria perché altrimenti si genererebbe una ricorsione infinita, se venisse passato per copia verrebbe chiamato il copy constructor, ma noi in questo lo stiamo definendo in questo momento.</p>
<h2 id="this">This</h2>
<p><code>this</code> in questo caso è un pointer all’oggetto e quindi lo si usa sempre con <code>-&gt;</code> invece che con <code>.</code></p>
<p>Come dimostrazione vediamo che la seguente assegnazione non genera errori:</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">animal</span><span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> weight<span class="token punctuation">;</span>
	<span class="token keyword">int</span> speed<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">weight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">//constructor</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token keyword">const</span> animal<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token function">weight</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>	<span class="token comment">//copy constructor</span>
	
	<span class="token keyword">int</span> <span class="token function">get_weight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		animal<span class="token operator">*</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>	<span class="token comment">//funziona</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>weight<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="const">Const</h2>
<p>Il <code>const</code> ha sia il significato che non è modificabile sia che può interagire solo con costrutti a loro volta dichiarati <code>const</code>.</p>
<p>Una buona regola quando si dichiarano le funzioni è di partire sempre da metodi <code>const variabile&amp;</code> questo perché è l’approccio più restrittivo.<br>
Nel caso si avesse bisogno di modificare la variabile allora si toglie il <code>const</code>.<br>
Qual ora si volesse una copia e non la variabile originale si toglie la <code>&amp;</code>.</p>
<h2 id="virtual">Virtual</h2>
<p>I metodi che si vuole permettere di far sovrascrivere ai propri figli si devono marcare come <code>virtual</code></p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">animal</span><span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> weight<span class="token punctuation">;</span>
	<span class="token keyword">int</span> speed<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">weight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token function">animal</span><span class="token punctuation">(</span><span class="token keyword">const</span> animal<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token function">weight</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function">speed</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
	<span class="token keyword">int</span> <span class="token function">get_weight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		animal<span class="token operator">*</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>weight<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">const</span> animal<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token comment">//metodo overridabile dai figli</span>
		weight <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">.</span>weight<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="ereditarietà">Ereditarietà</h2>
<p>La sintassi per ereditare da una classe è la seguente</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">dog</span> <span class="token operator">:</span> <span class="token keyword">public</span> animal <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Il tag della visibilità ha il seguente significato:</p>
<ul>
<li>se <strong>public</strong> significa che chiunque può vedere che sono figlio di quella classe, per cui chiunque può sostituirmi al posto di mio padre</li>
<li>se <strong>protected</strong> significa che solo i miei figli sono al corrente che sono figlio di quella classe e quindi solo loro possono sostituirmi al posto di mio padre</li>
<li>se <strong>private</strong> significa che nessuno può sostituirmi al posto di mio padre</li>
</ul>

    </div>
  </div>
</body>

</html>
