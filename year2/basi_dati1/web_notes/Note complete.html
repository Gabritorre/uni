<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Note complete</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#introduzione-a-basi-di-dati">Introduzione a basi di dati</a>
<ul>
<li></li>
<li><a href="#database-e-dbms">Database e DBMS</a></li>
<li><a href="#funzionalità-del-dbms">Funzionalità del DBMS</a></li>
<li><a href="#ddl">DDL</a></li>
<li><a href="#dml">DML</a></li>
</ul>
</li>
<li><a href="#progettazione-e-modellazione-del-bd">Progettazione e modellazione del BD</a>
<ul>
<li><a href="#modello-concettuale">Modello concettuale</a></li>
<li><a href="#ereditarietà-delle-classi">Ereditarietà delle classi</a></li>
<li><a href="#tipi-di-sottoclasse">Tipi di sottoclasse</a></li>
<li><a href="#esempio-completo-di-schema-concettuale">Esempio completo di schema concettuale</a></li>
</ul>
</li>
<li><a href="#progettazione-logica">Progettazione logica</a>
<ul>
<li><a href="#vincoli">Vincoli</a></li>
<li><a href="#dal-modello-a-oggetti-allo-schema-relazionale">Dal modello a oggetti allo schema relazionale</a></li>
<li><a href="#associazioni">Associazioni</a></li>
<li><a href="#gerarchia">Gerarchia</a></li>
<li><a href="#esempio-completo-di-schema-relazionale">Esempio completo di schema relazionale</a></li>
</ul>
</li>
<li><a href="#algebra-relazionale">Algebra relazionale</a>
<ul>
<li><a href="#ridenominazione">Ridenominazione</a></li>
<li><a href="#unione-e-differenza">Unione e Differenza</a></li>
<li><a href="#proiezione">Proiezione</a></li>
<li><a href="#restrizione">Restrizione</a></li>
<li><a href="#prodotto-cartesiano">Prodotto cartesiano</a></li>
<li><a href="#giunzione">Giunzione</a></li>
<li><a href="#intersezione">Intersezione</a></li>
<li><a href="#divisione">Divisione</a></li>
<li><a href="#funzioni-di-aggregazione">Funzioni di aggregazione</a></li>
<li><a href="#raggruppamento">Raggruppamento</a></li>
<li><a href="#operazioni-sui-multinsiemi">Operazioni sui multinsiemi</a></li>
<li><a href="#equivalenze-di-espressioni-algebriche">Equivalenze di espressioni algebriche</a></li>
</ul>
</li>
<li><a href="#calcolo-relazionale">Calcolo relazionale</a>
<ul>
<li></li>
</ul>
</li>
<li><a href="#linguaggio-sql">Linguaggio SQL</a></li>
<li><a href="#dml-1">DML</a>
<ul>
<li><a href="#select">Select</a></li>
<li><a href="#giunzione-1">Giunzione</a></li>
<li><a href="#notazione-con-il-punto">Notazione con il punto</a></li>
<li><a href="#alias">Alias</a></li>
<li><a href="#ridenominazione-1">Ridenominazione</a></li>
<li><a href="#funzioni-di-aggregazione-1">Funzioni di aggregazione</a></li>
<li><a href="#order-by">Order by</a></li>
<li><a href="#operatori-insiemistici">Operatori insiemistici</a></li>
<li><a href="#il-valore-null">Il valore NULL</a></li>
<li><a href="#between">Between</a></li>
<li><a href="#like">Like</a></li>
<li><a href="#clausola-where">Clausola where</a></li>
<li><a href="#raggruppamento-1">Raggruppamento</a></li>
<li><a href="#insert">INSERT</a></li>
<li><a href="#delete">DELETE</a></li>
<li><a href="#update">UPDATE</a></li>
<li><a href="#case-when-then-else">CASE WHEN THEN ELSE</a></li>
</ul>
</li>
<li><a href="#ddl-1">DDL</a>
<ul>
<li><a href="#schemi">Schemi</a></li>
<li><a href="#tabelle">Tabelle</a></li>
<li><a href="#vincoli-1">Vincoli</a></li>
<li><a href="#viste">Viste</a></li>
<li><a href="#associazioni-simmetriche">Associazioni simmetriche</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="introduzione-a-basi-di-dati">Introduzione a basi di dati</h1>
<h3 id="distinzione-tra-sistema-informatico-e-informativo">Distinzione tra sistema informatico e informativo</h3>
<p><strong>Sistema informativo</strong>: insieme di procedure e risorse (umani e non) per la raccolta, archiviazione, elaborazione e distribuzione di informazioni utili ad un’organizzazione per prendere delle decisioni</p>
<p><strong>Sistema informatico</strong>: insieme di tecnologie informatiche e telecomunicazioni che sono a supporto delle attività di un’organizzazione</p>
<p><strong>sistema informativo automatizzato</strong> il sistema informativo viene svolto usando un sistema informatico</p>
<h3 id="distinzione-tra-dato-e-informazione">Distinzione tra dato e informazione</h3>
<p><strong>Dati</strong>: sono dei valori grezzi (non elaborati) che sono subito visibili ma difficili da interpretare.<br>
<strong>Informazioni</strong>: provengono dall’elaborazione dei dati e servono a generare nuova conoscenza tramite delle interpretazioni e comprensione dei dati.</p>
<h2 id="database-e-dbms">Database e DBMS</h2>
<p>Un database è una raccolta di <strong>dati</strong> permanenti gestiti da un computer suddivisi in:</p>
<ul>
<li><strong>Metadati</strong>: servono a definire lo schema del database, la struttura dei dati, le operazioni eseguibili, le restrizioni, le autorizzazioni. I metadati vengono definiti prima di creare i dati.</li>
<li><strong>Dati</strong>: sono i valori presenti nel database che devono essere conformi alle caratteristiche del DB e su cui sono definite delle relazioni. I dati sono molti di più dei metadati, sono permanenti e sono utilizzabili contemporaneamente da più utenti inoltre sono protetti e accessibili mediante transazioni.</li>
</ul>
<p>Un DBMS (<em>Data Base Management System</em>) è un sistema che offre strumenti per gestire una base di dati, quindi la definizione della struttura le modifiche, le aggiunte, gli accessi, ecc…</p>
<p>Generalmente un utente non accede mai direttamente alla base di dati bensì si interfaccia o con il DBMS oppure con un programma esterno il quale si interfaccia a sua volta con il DBMS.</p>
<h2 id="funzionalità-del-dbms">Funzionalità del DBMS</h2>
<ul>
<li><strong>DDL</strong>: (Data Definition Language) Si occupa di definire la struttura dei dati, le regole di integrità e i privilegi degli utenti (Appartengono a questa categoria comandi come <strong>CREATE</strong>, <strong>ALTER</strong>, <strong>DROP</strong>).</li>
<li><strong>DML</strong>: Si occupa di leggere, inserire, modificare e cancellare dei dati (alcuni comandi sono <strong>SELECT</strong>, <strong>INSERT</strong>, <strong>UPDATE</strong>, <strong>DELETE</strong>).</li>
<li>Meccanismi per il controllo dei dati</li>
<li>Altri strumenti per l’amministrazione del DB</li>
</ul>
<h2 id="ddl">DDL</h2>
<p>Possiamo descrivere un database in 3 livelli differenti</p>
<ul>
<li>livello fisico: descrive come vengono organizzati i dati fisicamente in memoria</li>
<li>livello logico: descrive la struttura dei dati e le loro relazioni in modo astratto</li>
<li>livello di vista logica: descrive come appare la struttura astratta del BD per un certo applicativo esterno (può variare in base all’applicativo)</li>
</ul>
<h2 id="dml">DML</h2>
<p>Per manipolare un database ci sono generalmente 2 modi in base alla capacità di chi vuole agire:</p>
<ul>
<li>Tramite una interfaccia grafica</li>
<li>Oppure tramite uno specifico linguaggio: direttamente in SQL oppure in altri linguaggi usando librerie o SQL embedded nel linguaggio.</li>
</ul>
<h3 id="controllo-dei-dati">Controllo dei dati</h3>
<p>Il DBMS deve:</p>
<ul>
<li>Verificare che l’integrità del database sia mantenuta, quindi ogni dato deve rispettare i propri <strong>vincoli di integrità</strong></li>
<li>Proteggere il database da accessi non autorizzati, da malfunzionamenti <em>hardware</em> e <em>software</em>, da accessi concorrenti degli utenti</li>
</ul>
<h3 id="transazioni">Transazioni</h3>
<p>Una transazione è una sequenza di istruzioni in lettura e scrittura che deve rispettare le proprietà <strong>ACID</strong>:</p>
<ul>
<li><em>Atomicità</em>: le istruzioni devono essere viste come una istruzione singola, quindi se nel mezzo si verifica un problema viene abortita tutta la transazione, annullando tutte le modifiche apportate.</li>
<li><em>Consistenza</em>: Dopo la transazione l’integrità referenziale deve essere mantenuta.</li>
<li><em>Isolamento</em>: più transazioni effettuate in contemporanea devono risultare come se fossero eseguite una dopo l’altra.</li>
<li><em>Durabilità</em>: Alla fine della transazione le modifiche devono essere salvate permanentemente su disco.</li>
</ul>
<h1 id="progettazione-e-modellazione-del-bd">Progettazione e modellazione del BD</h1>
<p>Prima di realizzare fisicamente un database bisogna prima creare dei <strong>modelli astratti</strong> che rappresentano la realtà di riferimento.</p>
<h2 id="modello-concettuale">Modello concettuale</h2>
<p>Il modello concettuale è il primo schema da realizzare che interpreta realtà di riferimento.</p>
<p>Noi useremo un <strong>modello ad oggetti</strong> che appunto riprende dei concetti dalla programmazione ad oggetti e li applica alla progettazione concettuale di un DB.</p>
<h3 id="entità-proprietà-e-associazioni">Entità, Proprietà e Associazioni</h3>
<p>Questo modello si concentra sulla rappresentazione di <strong>entità</strong>, le relative <strong>proprietà</strong> e le <strong>associazioni</strong> tra varie entità:</p>
<p>la seguente foto è una simil-tabella di un database per orientarsi con i termini<br>
<img src="https://i.ibb.co/64Wm6kQ/class.png" alt="enter image description here"></p>
<ul>
<li>
<p>Una <strong>entità</strong>: può essere un oggetto fisico, un oggetto astratto, oppure anche un evento (ad esempio: un libro, una descrizione bibliografica, un prestito).<br>
Una istanza dell’entità deve possedere una <strong>chiave primaria</strong> (PK), nonostante ciò nel modello concettuale ad oggetti se non è esplicitata chiaramente una proprietà che può essere una PK allora <strong>non</strong> bisogna inventarsene una (in una rappresentazione successiva ci occuperemo di definire le chiami primarie).</p>
<p>Rappresentiamo graficamente una entità nel seguente modo<br>
<img src="https://i.ibb.co/k597RHG/entita.png" alt="enter image description here"></p>
</li>
<li>
<p>Le <strong>proprietà</strong> sono le caratteristiche che possiede una entità<br>
le proprietà possono essere di vario tipo:</p>
<ul>
<li>Atomiche: cioè una proprietà che non è divisibile in più parti</li>
<li>Record: una composizione di più proprietà che potrebbero essere divise (come un indirizzo di un luogo)</li>
<li>Sequenza: una lista di proprietà dello stesso tipo (ad esempio i recapiti telefonici o le lingue parlate)</li>
<li>Enumerazione: cioè una caratteristica che può assumere un valore tra tra un numero ristretto di valori possibili (ad esempio il sesso di una persona)</li>
</ul>
<p>Le proprietà possono avere dei <strong>vincoli di integrità</strong> cioè delle restrizioni sui valori che che possono assumere le proprietà.<br>
Rappresentiamo graficamente le proprietà di una entità nel seguente modo<br>
<img src="https://i.ibb.co/FDcHPbR/propriet.png" alt="enter image description here"></p>
</li>
<li>
<p>Le <strong>associazioni</strong> sono dei collegamenti logici che legano due o più entità.<br>
Una associazione è caratterizzata da due aspetti: <strong>la cardinalità e la totalità</strong></p>
<ul>
<li>
<p><strong>Cardinalità</strong> (o molteplicità): considerando una associazione tra le entità <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> abbiamo:</p>
<ul>
<li><strong>una molteplicità 1-1</strong>: se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> si associa al massimo un elemento di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> e viceversa.</li>
<li><strong>una molteplicità 1-n</strong>: se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> si possono associare più elementi di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> e per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> associa al massimo un <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span>.</li>
<li><strong>una molteplicità n-1</strong>: se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> si associa al massimo un <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> e per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> si possono associare più <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span>.</li>
<li><strong>una molteplicità n-m</strong>: se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> si possono associare più <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> e viceversa.</li>
</ul>
<p>Ad esempio con entità <em>STUDENTE</em> e <em>CORSO</em> e associazione <em>FREQUENTA</em> abbiamo una associazione <strong>(n-m)</strong> perché uno studente può frequentare più corsi e un corso può essere frequentato da più studenti.<br>
un altro esempio è INSEGNA(PROFESSORI, CORSI) ha molteplicità <strong>(1:n)</strong>, un professore insegna più corsi e un corso è insegnato da un professore.</p>
</li>
<li>
<p><strong>Totalità</strong>: una associazione è <strong>totale</strong> se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> esiste una associazione con <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span>, altrimenti se una <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> può anche non è associata a nessuna <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span></span></span></span></span> si dice <strong>parziale</strong><br>
Esempio: INSEGNA(PROFESSORI, CORSI) è <strong>totale su Corsi</strong> in quanto non può esistere un corso del piano di studi senza il corrispondente docente che lo tiene, <strong>parziale su Professori</strong>, in quanto un professore potrebbe non tenere corsi.</p>
</li>
</ul>
<p>Inoltre le associazioni possono avere delle <strong>proprietà a parte</strong> (che non risiedono in nessuna delle entità coinvolte nell’associazione), possono essere ricorsive, e possono associarsi a più di 2 entità (in questo caso chiamate <strong>associazione n-arie</strong>)</p>
<p>rappresentazione grafica della cardinalità e della totalità:<br>
<img src="https://i.ibb.co/gJ7XcdQ/cardinalit.png" alt="enter image description here"></p>
</li>
</ul>
<h2 id="ereditarietà-delle-classi">Ereditarietà delle classi</h2>
<p>Nel modello ad oggetti è possibile ereditare una classa da un’altra, la classe ereditata possiede tutti gli attributi della classe padre e in più è possibile:</p>
<ul>
<li>Aggiungere altri attributi</li>
<li>Ridefinire quelli già presenti (cambiandone il tipo, che deve essere un sottotipo del tipo del padre)</li>
</ul>
<h2 id="tipi-di-sottoclasse">Tipi di sottoclasse</h2>
<p><img src="https://i.ibb.co/4PTcTQf/sottoclassi.png" alt="enter image description here"></p>
<p>(istanze = righe della tabella)</p>
<ol>
<li><strong>Sottoclassi scorrelate</strong>: i figli possono avere istanze comuni e uniti non rappresentano la totalità delle istanze del padre</li>
<li><strong>Sottoclassi disgiunte</strong>: i figli non hanno istanze in comune</li>
<li><strong>Sottoclassi copertura</strong>: le istanze dei figli unite rappresentano la totalità delle istanze del padre</li>
<li><strong>Sottoclassi partizione</strong>: i figli non hanno istanze comuni e uniti rappresentano la totalità delle istanze del padre</li>
</ol>
<h2 id="esempio-completo-di-schema-concettuale">Esempio completo di schema concettuale</h2>
<p><img src="https://i.ibb.co/jD4Q007/image.png" alt="enter image description here"></p>
<h1 id="progettazione-logica">Progettazione logica</h1>
<p>Dopo aver realizzato il modello ad oggetti, si passa alla progettazione logica.</p>
<p>Nella progettazione logica andremo principalmente a rappresentare <strong>relazioni</strong> e <strong>ennuple</strong>.</p>
<p>Le <strong>relazioni</strong> sono essenzialmente le tabelle (o le entità) mentre le <strong>ennuple</strong> sono la lista degli attributi con il relativo tipo di dato.</p>
<p>Andremo a scrivere relazioni e ennuple come:</p>
<p><code>nome_tabella(attributo_1 : tipo_di_dato, attributo_2 : tipo_di_dato, ...)</code></p>
<p>Il numero di attributi della tabella è detto <strong>grado</strong> della relazione<br>
con <strong>cardinalità</strong> intendiamo quante righe ha una tabella.</p>
<p>Ad esempio, nella seguente tabella “Studenti”:</p>

<table>
<thead>
<tr>
<th>Nome</th>
<th>Cognome</th>
<th>Matricola</th>
<th>Anno</th>
</tr>
</thead>
<tbody>
<tr>
<td>Paolo</td>
<td>Vieri</td>
<td>13425</td>
<td>1998</td>
</tr>
<tr>
<td>Gina</td>
<td>Conti</td>
<td>11235</td>
<td>2000</td>
</tr>
<tr>
<td>Pierino</td>
<td>Giusti</td>
<td>15847</td>
<td>1997</td>
</tr>
</tbody>
</table><p>lo schema logico per questa singola tabella è:</p>
<p><code>Studenti(Nome:String, Cognome:String, Matricola:int, Anno:Date)</code></p>
<p>Il grado di questa tabella è 4<br>
mentre la cardinalità è 3</p>
<h2 id="vincoli">Vincoli</h2>
<p>Il modello logico deve considerare dei vincoli sugli attributi:</p>
<ul>
<li>not null</li>
<li>primary key</li>
<li>foreign key</li>
</ul>
<p>una istanza (una riga) che non rispetta i vincoli non può essere inserita nel DB.</p>
<h3 id="primary-key">Primary key</h3>
<p>La <em>primary key</em> (PK) serve ad identificare univocamente ogni riga di una tabella. Non è altro che un attributo (colonna) che deve essere diverso per ogni riga (spesso è una matricola oppure un id). È necessario che ogni tabella del database abbia una <em>primary key</em>.</p>
<p>Esiste anche il vincolo <strong>unique</strong> che posso assegnare ad altre colonne, esso genera lo stesso risultato della <em>primary key</em>, la differenza sta nel fatto che <em>primary key</em> <strong>non può essere null</strong> e ha una particolare funzione in fase di associazione di tabelle.</p>
<h3 id="foreign-key">Foreign key</h3>
<p>La <em>foreign key</em> è una colonna in cui i valori sono le chiavi primarie di un’altra tabella, serve a dire che una riga è collegata ad una determinata riga di un’altra tabella (quindi la <em>primary key</em> di una tabella combacia con la <em>foreign key</em> dell’altra).<br>
La presenza di queste <em>foreign key</em> garantiscono la proprietà di integrità dei dati del database, chiamata <strong>integrità referenziale</strong></p>
<p>Vediamo un esempio:</p>
<p>Tabella STUDENTI:</p>

<table>
<thead>
<tr>
<th>Nome</th>
<th>Cognome</th>
<th>Matricola (PK)</th>
<th>Anno</th>
</tr>
</thead>
<tbody>
<tr>
<td>Paolo</td>
<td>Vieri</td>
<td>13425</td>
<td>1998</td>
</tr>
<tr>
<td>Gina</td>
<td>Conti</td>
<td>11235</td>
<td>2000</td>
</tr>
<tr>
<td>Pierino</td>
<td>Giusti</td>
<td>15847</td>
<td>1997</td>
</tr>
</tbody>
</table><p>Tabella ESAMI:</p>

<table>
<thead>
<tr>
<th>Codice (PK)</th>
<th>Materia</th>
<th>Candidato*</th>
<th>Data</th>
<th>Voto</th>
<th>Lode</th>
</tr>
</thead>
<tbody>
<tr>
<td>B112</td>
<td>BD1</td>
<td>11235</td>
<td>08-07-06</td>
<td>27</td>
<td>0</td>
</tr>
<tr>
<td>F31</td>
<td>FIS1</td>
<td>13425</td>
<td>06-10-02</td>
<td>25</td>
<td>0</td>
</tr>
<tr>
<td>B247</td>
<td>BD2</td>
<td>15847</td>
<td>08-02-03</td>
<td>30</td>
<td>1</td>
</tr>
</tbody>
</table><p><code>Studenti(Nome:String, Cognome:String, Matricola:int, Anno:Date)</code><br>
<code>Esami(Codice:String, Materia:String, Candidato:int, Data:Date, voto: int, Lode: boolean)</code></p>
<p>In questo esempio le due tabelle hanno un’associazione che le lega.<br>
L’attributo “Matricola” nella tabella STUDENTI è <em>primary key</em>.<br>
L’attributo “Codice” nella tabella ESAMI è <em>primary key</em>.</p>
<p>Mentre l’attributo “Candidato” sulla tabella ESAMI è una <em>foreign key</em> che si riferisce all’attributo Matricola della tabella STUDENTI.</p>
<p>Questo design, però, ci costringe ad avere un solo candidato per esame (normalmente un esame viene sostenuto da più candidati). Per migliorare la relazione andrebbe creata un’altra tabella ma lo vedremo dopo.</p>
<h3 id="not-null">not null</h3>
<p>il valore <em>null</em> viene usato quando non si conosce il valore dell’attributo oppure un valore dato non è applicabile.</p>
<p>Il vincono <em>not null</em> ci impedisce di mettere <em>null</em> in un’attributo.</p>
<p>Le chiavi primarie implicitamente non possono essere <em>null</em>.<br>
Mentre una <em>foreign key</em> può essere <em>null</em> nel caso ci sia un’associazione parziale tra le tabelle.</p>
<h2 id="dal-modello-a-oggetti-allo-schema-relazionale">Dal modello a oggetti allo schema relazionale</h2>
<p>Per costruire lo schema relazionale dobbiamo trasformare alcune cose:</p>
<h2 id="associazioni">Associazioni</h2>
<p>Partiamo dalle <strong>associazioni molti a uno totali</strong>:<br>
Si mette la <em>foreign key</em> ed eventuale attributi della relazione nell’entità con molteplicità n<br>
<img src="https://i.ibb.co/F7w80tD/n-1-tot.png" alt="enter image description here"></p>
<p>Mentre per le <strong>associazioni molti a uno parziali</strong> abbiamo due modi di trasformare: o nello stesso modo delle totali, oppure creando una nuova tabella<br>
<img src="https://i.ibb.co/yPnqjKY/n-1-parz.png" alt="enter image description here"></p>
<p>Per le <strong>associazione uno a uno</strong> in caso di totalità è indifferente dove mettere la <em>foreign key</em> mentre se c’è la parzialità bisogna rispettarla:</p>
<p><img src="https://i.ibb.co/LYH7dfZ/1-1-parz.png" alt="enter image description here"></p>
<p>Mentre per le <strong>associazioni molti a molti</strong> dobbiamo inserire una nuova tabella<br>
<img src="https://i.ibb.co/pKp3L4X/molti-a-molti.png" alt="enter image description here"></p>
<h2 id="gerarchia">Gerarchia</h2>
<p><img src="https://i.ibb.co/R6N2YVg/gerarchia.png" alt="enter image description here"><br>
Nello schema relazionale dobbiamo rimuovere ogni forma di gerarchia, possiamo farlo in tre modi diversi:</p>
<ol>
<li>
<p><strong>Relazione unica</strong><br>
Possiamo accorpare le tre tabelle in una unica, in cui si uniscono gli attributi di tutte le tabelle con l’aggiunta di un discriminante che indica a quale tabella apparteneva ogni riga.<br>
Conveniente se i figli differiscono di pochi attributi</p>
<p><img src="https://i.ibb.co/GFHzQQk/reaz-unica.png" alt="enter image description here"></p>
</li>
<li>
<p><strong>Partizionamento verticale</strong><br>
Manteniamo le tre tabelle, la tabella padre rimane uguale mentre ai figli aggiungiamo la <em>primary key</em> del padre che farà anche da <em>foreign key</em> verso il padre. Quindi la gerarchia si trasforma in due associazioni<br>
<img src="https://i.ibb.co/Pwr9K7f/part-vert.png" alt="enter image description here"></p>
</li>
<li>
<p><strong>Partizionamento orizzontale</strong><br>
Accorpiamo gli attributi nei figli e li rendiamo due tabelle distinte, se la gerarchia è una copertura allora il padre sparisce, altrimenti rimane.<br>
Questo metodo <strong>non si può applicare</strong> se il padre della gerarchia ha una <strong>associazione entrante</strong>.<br>
Questo metodo è scomodo nel caso in cui la gerarchia sia di tipo scorrelata, in quanto i figli possono avere degli attributi comuni e quando si vuole modificare un figlio bisognerebbe modificare anche l’altro per mantenere la coerenza dei dati.<br>
<img src="https://i.ibb.co/qknckbs/part-oriz.png" alt="enter image description here"></p>
</li>
</ol>
<h3 id="chiave-primaria">chiave primaria</h3>
<p>Ogni tabella deve avere una chiave primaria che identifica le righe, quindi se non è presente va aggiunta (spesso si introduce un attributo come “matricola”, “codice” o “id”)</p>
<h3 id="attributi-multivalore">Attributi multivalore</h3>
<p>Gli attributi multivalore possono essere gestiti in 2 modi diversi, in base a se si vuole far diventare l’attributo una tabella indipendente oppure solo una associazione diretta con la tabella da cui proviene:</p>
<ol>
<li>
<p>Associazione diretta.</p>
<p>Un esempio può essere una persona con i numeri di telefono, dato che è molto improbabile condividere un numero di telefono tra più persone fare una associazione diretta è sufficiente:</p>
<p>ad esempio<br>
<img src="https://i.ibb.co/1XKmGY3/multival-before.png" alt="enter image description here"></p>
<p>diventa:<br>
<img src="https://i.ibb.co/qxScpSw/multival-after.png" alt="enter image description here"></p>
<p>Abbiamo quindi una tabella Telefono che è composta da il codice fiscale della persona e dal numero di telefono, insieme identificano ogni riga della tabella.</p>
</li>
<li>
<p>Tabella indipendente<br>
Un esempio può essere fatto tra persona e le lingue che una persona sa parlare, in questo caso è molto probabile che delle lingue siano in comune tra più persone quindi è conveniente fare una tabella indipendente per le lingue e avere una relazione che lega persona e lingua.</p>
<p><img src="https://i.ibb.co/x8H48Xj/multival-before.png" alt="enter image description here"></p>
<p>diventa:<br>
<img src="https://i.ibb.co/hZg0SVg/multival-after.png" alt="enter image description here"></p>
</li>
</ol>
<h3 id="attributi-strutturati">Attributi strutturati</h3>
<p>I campi strutturati (cioè composti da più tipi di dato) vanno scomposti in più attributi, fino a che ogni attributo sia un tipo di dato primitivo.</p>
<p>ad esempio<br>
<img src="https://i.ibb.co/3MnGGQ9/struct-before.png" alt="enter image description here"></p>
<p>diventa:</p>
<p><img src="https://i.ibb.co/2WcQMyp/struct-after.png" alt="enter image description here"></p>
<h2 id="esempio-completo-di-schema-relazionale">Esempio completo di schema relazionale</h2>
<p><img src="https://i.ibb.co/8cRMDhg/image.png" alt="enter image description here"></p>
<h1 id="algebra-relazionale">Algebra relazionale</h1>
<p>L’algebra relazionale è un linguaggio relazionale che combina un insieme di operatori che operano su relazioni (tabelle) e restituiscono relazioni (tabelle).</p>
<p>Serve per rappresentare le interrogazioni (in modo indipendente dal linguaggio poi utilizzato) che si possono fare su un database.</p>
<p>Ci sono diversi tipi di operatori:</p>
<ul>
<li><strong>primitivi</strong>: ridenominazione, proiezione, unione, differenza, restrizione, prodotto</li>
<li><strong>derivati</strong>: giunzione, divisione</li>
<li><strong>altri</strong>: raggruppamento, order by, min, max, …</li>
</ul>
<h2 id="ridenominazione">Ridenominazione</h2>
<p>Rappresentiamo questo operatore con la lettera greca <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">ρ</span></span></span></span></span> (detta “rho”).</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>ρ</mi><mrow><mi>A</mi><mo>←</mo><mi>B</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_{A\leftarrow B}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mrel mtight">←</span><span class="mord mathnormal mtight" style="margin-right: 0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></span></p>
<p>è l’equivalente del comando <strong>AS</strong> in SQL</p>
<p>Serve per rinominare il nome di una colonna <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span></span></span></span></span> nel nuovo nome <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal">A</span></span></span></span></span> di una tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span></p>
<p>è utile quando abbiamo tabelle che hanno colonne con lo stesso nome.</p>
<h2 id="unione-e-differenza">Unione e Differenza</h2>
<p>Avendo due tabelle <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> <strong>dello stesso tipo</strong> (quindi le tabelle hanno le colonne con gli stessi tipi di dato)</p>
<ul>
<li>
<p><strong>Unione</strong>: crea una nuova tabella con le righe della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> assieme alle righe della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span>.<br>
Il numero di colonne rimane invariato e vengono esclusi i duplicati</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>∪</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mtext>&nbsp;tale&nbsp;che:&nbsp;</mtext><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∨</mo><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\cup S = \{t \text{ tale che: } t\in R \lor t \in S\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord text"><span class="mord">&nbsp;tale&nbsp;che:&nbsp;</span></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.65418em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">}</span></span></span></span></span></span></p>
<p>è l’equivalente del comando <strong>UNION</strong> (in cui esclude i duplicati) oppure <strong>UNION ALL</strong> (include anche i duplicati) in SQL</p>
</li>
<li>
<p><strong>Differenza</strong>: crea una nuova tabella con le righe della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> che però non sono nella tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span><br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>−</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mtext>&nbsp;tale&nbsp;che:&nbsp;</mtext><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mo mathvariant="normal">∉</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R - S = \{t \text{ tale che: } t\in R \land t \notin S\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord text"><span class="mord">&nbsp;tale&nbsp;che:&nbsp;</span></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right: 0.0555556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">}</span></span></span></span></span></span></p>
<p>è l’equivalente del comando <strong>EXCEPT</strong> in SQL</p>
</li>
</ul>
<h2 id="proiezione">Proiezione</h2>
<p>rappresentiamo questo operatore con la lettera greca <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span></span></span></span></span> (detta “pi”).</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{a_1, a_2, a_3, ..., a_n}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></span></p>
<p>è l’equivalente del comando <strong>SELECT</strong> in SQL</p>
<p>Crea una tabella con un sottoinsieme delle colonne della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span>, Il sottoinsieme viene specificato tramite l’elenco delle colonne che si desidera mantenere <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">a_1, a_2, a_3,</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span></span> ecc…</p>
<h3 id="proiezione-generalizzata">Proiezione generalizzata</h3>
<p>è possibile fare delle operazioni aritmetiche sulle colonne selezionate, e opzionalmente rinominare l’operazione usando la parola chiave <strong>AS</strong> seguita dal nuovo nome:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mtext>a1,&nbsp;a2,&nbsp;a1+a2&nbsp;AS&nbsp;somma</mtext></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{\text{a1, a2, a1+a2 AS somma}} (R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">a1,&nbsp;a2,&nbsp;a1+a2&nbsp;AS&nbsp;somma</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></span></p>
<h2 id="restrizione">Restrizione</h2>
<p>Rappresentiamo questo operatore con la lettera greca “sigma” <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span></span></span></span></span> e la condizione la indichiamo con “phi” <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">ϕ</span></span></span></span></span>.</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>σ</mi><mi>ϕ</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{\phi}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ϕ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></span></p>
<p>è l’equivalente del comando <strong>WHERE</strong> in SQL</p>
<p>Crea una tabella solo con le righe della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> che soddisfano la condizione <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">ϕ</span></span></span></span></span></p>
<h2 id="prodotto-cartesiano">Prodotto cartesiano</h2>
<p>Avendo due tabelle <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> ed <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span>, il prodotto cartesiano</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\times S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>crea una nuova tabella in cui ogni riga di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> viene affiancata ad ogni riga di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></p>
<p>Equivale al comando <strong>CROSS JOIN</strong> oppure <strong>FROM &lt;tabella1&gt;, &lt;tabella2&gt;</strong> in SQL</p>
<p>Esempio grafico:<br>
<img src="https://i.ibb.co/5Wj6xgx/prodotto-cartesiano.png" alt="enter image description here"></p>
<h2 id="giunzione">Giunzione</h2>
<p>Rappresentiamo questo operatore con il simbolo <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋈</mo></mrow><annotation encoding="application/x-tex">\bowtie</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.51em; vertical-align: -0.005em;"></span><span class="mrel">⋈</span></span></span></span></span> e la condizione la rappresentiamo con <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">ϕ</span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo><munder><mo><mo>⋈</mo></mo><mi>ϕ</mi></munder></mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \underset{\phi}{\bowtie} S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.57655em; vertical-align: -0.893216em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.505em;"><span class="" style="top: -2.34289em; margin-left: 0em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ϕ</span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class=""><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.893216em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Serve ad affiancare le righe delle due tabelle se viene soddisfatta la condizione tra la coppia di righe</p>
<p>equivalente al comando <strong>(INNER) JOIN &lt;tabella&gt; ON &lt;condizione&gt;</strong> in SQL</p>
<p>ad esempio</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo><munder><mo><mo>⋈</mo></mo><mrow><mi>R</mi><mi mathvariant="normal">.</mi><mi>a</mi><mo>=</mo><mi>S</mi><mi mathvariant="normal">.</mi><mi>b</mi></mrow></munder></mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \underset{R.a = S.b}{\bowtie} S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.44044em; vertical-align: -0.757108em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.505em;"><span class="" style="top: -2.34289em; margin-left: 0em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.00773em;">R</span><span class="mord mtight">.</span><span class="mord mathnormal mtight">a</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight" style="margin-right: 0.05764em;">S</span><span class="mord mtight">.</span><span class="mord mathnormal mtight">b</span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class=""><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.757108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Crea una nuova tabella in cui si affiancano le righe se soddisfano la condizione che: l’attributo <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">a</span></span></span></span></span> della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> e l’attributo <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal">b</span></span></span></span></span> della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> sono uguali.</p>
<p>Spesso usato per unire tabelle che sono in relazione tramite <em>foreign key</em>, dove la condizione è che la <em>foreign key</em> di una tabella e la <em>primary key</em> dell’altra sono uguali.</p>
<h3 id="giunzione-naturale">Giunzione naturale</h3>
<p>È un particolare tipo di join che confronta automaticamente le colonne delle due tabelle con lo stesso nome, senza bisogno quindi di una condizione. Non è consigliato utilizzarla in quando è meglio esplicitare la condizione di join.</p>
<p>Equivalente al comando <strong>NATURAL JOIN &lt;tabella&gt;</strong> in SQL</p>
<h3 id="giunzione-esterna">Giunzione esterna</h3>
<p>È un particolare tipo di join che mantiene anche le righe che non soddisfano la condizione del join (quindi vengono ottenute tutte le righe di entrambe le tabelle), a queste righe vengono aggiunti dei valori NULL dove manca la corrispondenza.</p>
<p>equivalente al comando <strong>OUTER JOIN &lt;tabella&gt; ON &lt;condizione&gt;</strong> in SQL</p>
<p>Esempio</p>
<p>Tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span></p>

<table>
<thead>
<tr>
<th>id</th>
<th>nome</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Alice</td>
</tr>
<tr>
<td>2</td>
<td>Bob</td>
</tr>
<tr>
<td>3</td>
<td>Charlie</td>
</tr>
</tbody>
</table><p>Tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></p>

<table>
<thead>
<tr>
<th>id</th>
<th>età</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>13</td>
</tr>
<tr>
<td>3</td>
<td>20</td>
</tr>
<tr>
<td>4</td>
<td>32</td>
</tr>
</tbody>
</table><p>La giunzione esterna rappresentata con il seguente simbolo tra le due tabelle risulta<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><msub><mo><munder><mo><mo>↔</mo></mo><mo lspace="0em" rspace="0em">⋈</mo></munder></mo><mtext>R.id&nbsp;=&nbsp;S.id</mtext></msub><mi>S</mi></mrow><annotation encoding="application/x-tex">R \underset{\bowtie}{\leftrightarrow}_{\text{R.id = S.id}} S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.43653em; vertical-align: -0.7532em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.36687em;"><span class="" style="top: -2.4em; margin-left: 0em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⋈</span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class=""><span class="mop">↔</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7035em;"><span class=""></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="" style="top: -1.9468em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">R.id&nbsp;=&nbsp;S.id</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7532em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>

<table>
<thead>
<tr>
<th>id</th>
<th>nome</th>
<th>età</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Alice</td>
<td>13</td>
</tr>
<tr>
<td>2</td>
<td>Bob</td>
<td>NULL</td>
</tr>
<tr>
<td>3</td>
<td>Charlie</td>
<td>20</td>
</tr>
<tr>
<td>4</td>
<td>NULL</td>
<td>32</td>
</tr>
</tbody>
</table><p>Abbiamo due sottocategorie della giunzione esterna:</p>
<h3 id="giunzione-esterna-sinistra">Giunzione esterna sinistra</h3>
<p>In cui consideriamo tutte le righe della tabella di sinistra e solo quelle che soddisfano la condizione della tabella di destra, se delle righe di sinistra non hanno nessuna corrispondenza con alcuna riga della destra allora si mette NULL.</p>
<p>Equivalente al comando <strong>LEFT JOIN &lt;tabella&gt; ON &lt;condizione&gt;</strong> in SQL</p>
<p>e si rappresenta con il seguente simbolo</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><msub><mo><munder><mo><mo>←</mo></mo><mo lspace="0em" rspace="0em">⋈</mo></munder></mo><mtext>R.id&nbsp;=&nbsp;S.id</mtext></msub><mi>S</mi></mrow><annotation encoding="application/x-tex">R \underset{\bowtie}{\leftarrow}_{\text{R.id = S.id}} S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.43653em; vertical-align: -0.7532em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.36687em;"><span class="" style="top: -2.4em; margin-left: 0em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⋈</span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class=""><span class="mop">←</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7035em;"><span class=""></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="" style="top: -1.9468em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">R.id&nbsp;=&nbsp;S.id</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7532em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Considerando le stesse tabelle di prima otteniamo dalla <em>left join</em>:</p>

<table>
<thead>
<tr>
<th>ID</th>
<th>nome</th>
<th>età</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Alice</td>
<td>13</td>
</tr>
<tr>
<td>2</td>
<td>Bob</td>
<td>NULL</td>
</tr>
<tr>
<td>3</td>
<td>Charlie</td>
<td>20</td>
</tr>
</tbody>
</table><h3 id="giunzione-esterna-destra">Giunzione esterna destra</h3>
<p>È analoga alla giunzione esterna sinistra.</p>
<p>In cui consideriamo tutte le righe della tabella di destra e solo quelle che soddisfano la condizione della tabella di sinistra, se delle righe di destra non hanno nessuna corrispondenza con alcuna riga della sinistra allora si mette NULL.</p>
<p>Equivalente al comando <strong>RIGHT JOIN &lt;tabella&gt; ON &lt;condizione&gt;</strong> in SQL</p>
<p>e si rappresenta con il seguente simbolo</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><msub><mo><munder><mo><mo>→</mo></mo><mo lspace="0em" rspace="0em">⋈</mo></munder></mo><mtext>R.id&nbsp;=&nbsp;S.id</mtext></msub><mi>S</mi></mrow><annotation encoding="application/x-tex">R \underset{\bowtie}{\rightarrow}_{\text{R.id = S.id}} S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.43653em; vertical-align: -0.7532em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.36687em;"><span class="" style="top: -2.4em; margin-left: 0em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⋈</span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class=""><span class="mop">→</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7035em;"><span class=""></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="" style="top: -1.9468em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">R.id&nbsp;=&nbsp;S.id</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7532em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Considerando le stesse tabelle di prima otteniamo dalla <em>right join</em>:</p>

<table>
<thead>
<tr>
<th>ID</th>
<th>nome</th>
<th>età</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Alice</td>
<td>13</td>
</tr>
<tr>
<td>3</td>
<td>Charlie</td>
<td>20</td>
</tr>
<tr>
<td>4</td>
<td>NULL</td>
<td>32</td>
</tr>
</tbody>
</table><h2 id="intersezione">Intersezione</h2>
<p>Avendo due tabelle <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></p>
<p>L’<strong>intersezione</strong>: crea una nuova tabella contenente solo le righe che sono in comune tra le due tabelle</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \cap S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Equivalente al comando <strong>INTERSECT</strong> in SQL</p>
<p>Esprimibile anche come <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>−</mo><mo stretchy="false">(</mo><mi>R</mi><mo>−</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R - (R - S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span></span></span></span></span></p>
<h2 id="divisione">Divisione</h2>
<p>Avendo due tabelle <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> che condividono una colonna, la divisione crea una nuova tabella formata solo dalle colonne di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span>, tranne quella condivisa. Vengono inserite le righe di <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> che possiedono tutti i valori della tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> della colonna condivisa.</p>
<p>Definizione formale: "date le relazioni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>X</mi><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(XY)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span><span class="mclose">)</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.22222em;">Y</span><span class="mclose">)</span></span></span></span></span> si vuole produrre una relazione <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span></span></span></span></span> tale che una ennupla <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61508em; vertical-align: 0em;"></span><span class="mord mathnormal">t</span></span></span></span></span> è in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.13889em;">T</span></span></span></span></span> se e solo se per ogni <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">s</span></span></span></span></span> in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> la ennupla <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>t</mi><mo separator="true">,</mo><mi>s</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;t, s&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.80952em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span></span></span></span></span> appare in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span>"</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>w</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">{</mo><mi>w</mi><mo stretchy="false">}</mo><mo>×</mo><mi>S</mi><mo>⊆</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\div S = \{w|\{w\}\times S \subseteq R\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right: 0.02691em;">w</span><span class="mord">∣</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right: 0.02691em;">w</span><span class="mclose">}</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.8193em; vertical-align: -0.13597em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">}</span></span></span></span></span></span></p>
<p>Ad esempio:</p>
<p>Tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span></p>

<table>
<thead>
<tr>
<th>nome</th>
<th>genere</th>
<th>ufficio</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>F</td>
<td>uff1</td>
</tr>
<tr>
<td>Alice</td>
<td>F</td>
<td>uff2</td>
</tr>
<tr>
<td>Bob</td>
<td>M</td>
<td>uff1</td>
</tr>
<tr>
<td>Charlie</td>
<td>M</td>
<td>uff1</td>
</tr>
<tr>
<td>Charlie</td>
<td>M</td>
<td>uff2</td>
</tr>
</tbody>
</table><p>Tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></p>

<table>
<thead>
<tr>
<th>ufficio</th>
</tr>
</thead>
<tbody>
<tr>
<td>uff1</td>
</tr>
<tr>
<td>uff2</td>
</tr>
</tbody>
</table><p>La divisione</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \div S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></span></p>
<p>Restituirà la tabella</p>

<table>
<thead>
<tr>
<th>nome</th>
<th>genere</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>F</td>
</tr>
<tr>
<td>Charlie</td>
<td>M</td>
</tr>
</tbody>
</table><p>Nella tabella risultante ci sono due valori &lt;nome, genere&gt; tali che ogni &lt;nome, genere, ufficio&gt; (cioè il prodotto cartesiano tra il risultato e la tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span>) è compreso in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span>.<br>
In altre parole solo Alice e Charlie lavorano in tutti gli uffici presenti nella tabella <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span></p>
<p>La divisione non ha un equivalente comando in SQL.</p>
<p>È possibile implementarla tramite la seguente query in algebra relazionale:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mi>X</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mi>π</mi><mi>X</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mi>π</mi><mi>X</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo><mo>−</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_X (R) - \pi_X ((\pi_X(R)\times S)-R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">((</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></span></p>
<p>Dove <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">X</span></span></span></span></span> è l’insieme degli attributi <strong>che possiede solo</strong> <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span></span></span></span></span> (quindi non la colonna condivisa)</p>
<h2 id="funzioni-di-aggregazione">Funzioni di aggregazione</h2>
<p>Le funzioni di aggregazione sono delle funzioni che prendono in input uno o più insiemi di valori e restituiscono un singolo valore numerico.<br>
Alcuni esempi di queste funzioni sono:</p>
<ul>
<li>sum: restituisce la somma dei valori</li>
<li>avg: restituisce la media del valori</li>
<li>count: restituisce quanti sono i valori</li>
<li>min e max: restituiscono rispettivamente il minimo e il massimo tra i valori</li>
</ul>
<h2 id="raggruppamento">Raggruppamento</h2>
<p>L’operatore di raggruppamento rappresentato con il simbolo greco “gamma” <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span></span></span></span></span>, serve ad aggregare le righe utilizzando le funzioni di aggregazione</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="1.2em"><msub><mrow></mrow><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow></msub><msub><mi>γ</mi><mrow><mi>f</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>f</mi><mi>m</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\large_{a1,...,an}\gamma_{f1,...,fm}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.23555em; vertical-align: -0.335552em;"></span><span class="mord sizing reset-size6 size7"><span class=""></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.279627em;"><span class="" style="top: -2.65em; margin-right: 0.0416667em;"><span class="pstrut" style="height: 2.8em;"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">an</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.279627em;"><span class=""></span></span></span></span></span></span><span class="mord sizing reset-size6 size7"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.31296em;"><span class="" style="top: -2.65em; margin-left: -0.05556em; margin-right: 0.0416667em;"><span class="pstrut" style="height: 2.8em;"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.10764em;">f</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.10764em;">f</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.279627em;"><span class=""></span></span></span></span></span></span><span class="mopen sizing reset-size6 size7">(</span><span class="mord mathnormal sizing reset-size6 size7" style="margin-right: 0.00773em;">R</span><span class="mclose sizing reset-size6 size7">)</span></span></span></span></span></span></p>
<p>Dove <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a1,...,an</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">a</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal">an</span></span></span></span></span> sono gli attributi, mentre <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>f</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">f1,...,fm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="mord mathnormal">m</span></span></span></span></span> sono le funzioni di aggregazione.</p>
<p>A parole si potrebbe dire: "selezionami le colonne <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>f</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">f1,...,fm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="mord mathnormal">m</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a1,...,an</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">a</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal">an</span></span></span></span></span> raggruppate per i valori <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a1,...,an</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">a</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal">an</span></span></span></span></span>"</p>
<p>Equivalente al comando <strong>GROUP BY</strong> in SQL</p>
<p>Ad esempio nella seguente tabella Esami:<br>
<img src="https://i.ibb.co/P61P0Km/esempio-aggr.png" alt="enter image description here"></p>
<p>La seguente operazione di raggruppamento:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="1.2em"><msub><mrow></mrow><mtext>Materia</mtext></msub><msub><mi>γ</mi><mtext>avg(Voto)</mtext></msub><mo stretchy="false">(</mo><mtext>Esami</mtext><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\large_{\text{Materia}}\gamma_{\text{avg(Voto)}} (\text{Esami})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.28624em; vertical-align: -0.38624em;"></span><span class="mord sizing reset-size6 size7"><span class=""></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.305553em;"><span class="" style="top: -2.65em; margin-right: 0.0416667em;"><span class="pstrut" style="height: 2.8em;"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Materia</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord sizing reset-size6 size7"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.6448em; margin-left: -0.05556em; margin-right: 0.0416667em;"><span class="pstrut" style="height: 2.8em;"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg(Voto)</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.321867em;"><span class=""></span></span></span></span></span></span><span class="mopen sizing reset-size6 size7">(</span><span class="mord text sizing reset-size6 size7"><span class="mord">Esami</span></span><span class="mclose sizing reset-size6 size7">)</span></span></span></span></span></span></p>
<p>restituisce<br>
<img src="https://i.ibb.co/855CgHq/image.png" alt="enter image description here"></p>
<p>Quindi calcola la media degli esami raggruppati per materia</p>
<h2 id="operazioni-sui-multinsiemi">Operazioni sui multinsiemi</h2>
<ul>
<li>
<p>Proiezione senza eliminare i duplicati<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>π</mi><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow><mi>b</mi></msubsup><mo stretchy="false">(</mo><mi>O</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi^b_{a1,...,an} (O)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.28222em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.899108em;"><span class="" style="top: -2.453em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">an</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mclose">)</span></span></span></span></span></span></p>
</li>
<li>
<p>Eliminazione dei duplicati dell’insiemi<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>δ</mi><mo stretchy="false">(</mo><mi>O</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\delta(O)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.03785em;">δ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mclose">)</span></span></span></span></span></span></p>
</li>
<li>
<p>Ordinamento degli attributi<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>τ</mi><mrow><mi>a</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>O</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tau_{a1,...,an}(O)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.1132em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">an</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mclose">)</span></span></span></span></span></span></p>
</li>
<li>
<p>Unione, intersezione e differenza in cui si mantengono i duplicati</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><msup><mo>∪</mo><mi>b</mi></msup><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_1 \cup^b O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04911em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin"><span class="mbin">∪</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.899108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p>
<p>nell’intersezione prendo il minimo di duplicati comuni delle due tabelle</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><msup><mo>∩</mo><mi>b</mi></msup><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_1 \cap^b O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04911em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin"><span class="mbin">∩</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.899108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p>
<p>nella differenza prendo il massimo di duplicati tra 0 e la differenza tra il numero di duplicati di O_1 e il numero di duplicati di O_2<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><msup><mo>−</mo><mi>b</mi></msup><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_1 -^b O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04911em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin"><span class="mbin">−</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.899108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p>
<p>in altre parole se una riga è ripetuta 5 volte in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">O_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> e la stessa riga è ripetuta 3 volte in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> nel risultato quella riga sarà presente 2 volte.<br>
Se invece è ripetuta 5 volte in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">O_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> e 7 volte in <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> nel risultato non ci sarà nessuna occorrenza di quella riga</p>
</li>
</ul>
<h2 id="equivalenze-di-espressioni-algebriche">Equivalenze di espressioni algebriche</h2>
<ul>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mi>A</mi></msub><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>A</mi><mo separator="true">,</mo><mi>B</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>π</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{A}(\pi_{A,B}(R)) \equiv \pi_A(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">))</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></li>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><msub><mi>C</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><msub><mi>C</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><mrow><msub><mi>C</mi><mn>1</mn></msub><mo>∧</mo><msub><mi>C</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{C_1}(\sigma_{C_2}(R)) \equiv \sigma_{C_1 \land C_2 }(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">))</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">∧</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></li>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><msub><mi>C</mi><mn>1</mn></msub><mo>∧</mo><msub><mi>C</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><msub><mi>C</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>×</mo><msub><mi>σ</mi><msub><mi>C</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{C_1 \land C_2}(R \times S) \equiv \sigma_{C_1}(R) \times \sigma_{C_2}(S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">∧</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span></span></span></span></span></li>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>×</mo><mo stretchy="false">(</mo><mi>S</mi><mo>×</mo><mi>T</mi><mo stretchy="false">)</mo><mo>≡</mo><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo><mo>×</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">R \times (S \times T) \equiv (R \times S) \times T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.13889em;">T</span></span></span></span></span></li>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo><mo>≡</mo><mo stretchy="false">(</mo><mi>S</mi><mo>×</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(R \times S) \equiv (S \times R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></li>
<li><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mi>C</mi></msub><msub><mo stretchy="false">(</mo><mi>X</mi></msub><msub><mi>γ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub> <mi>X</mi></msub><msub><mi>γ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mi>C</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{C}(_X \gamma_F(R)) \equiv \,_X\gamma_F(\sigma_C(R))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">))</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mspace" style="margin-right: 0.166667em;"></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mclose">))</span></span></span></span></span></li>
</ul>
<h1 id="calcolo-relazionale">Calcolo relazionale</h1>
<p>Il calcolo relazione è un modo alternativo all’algebra relazione di interrogare i database.<br>
Esistono due varianti del calcolo relazionale:</p>
<ul>
<li>Calcolo Relazionale su Ennuple (CRE)</li>
<li>Calcolo Relazionale su Domini (CRD)</li>
</ul>
<p>Queste due varianti e l’algebra relazionale sono espressivamente equivalenti ma hanno alcune differenze:</p>
<ul>
<li>L’algebra relazionale è un <strong>linguaggio procedurale</strong><br>
una interrogazione specifica sia cosa si vuole recuperare e anche come recuperarlo</li>
<li>Il calcolo relazionale è un <strong>linguaggio dichiarativo</strong><br>
una interrogazione specifica cosa si vuole recuperare ma <strong>non come</strong></li>
</ul>
<p>Il calcolo relazionale utilizza una logica fatta da <strong>termini</strong> e <strong>formule</strong></p>
<p>I termini possono essere: valori costanti, variabili oppure funzioni.<br>
Le formule denotano valori di verità (and, or, not, implies, forall, exist)</p>
<h3 id="calcolo-relazione-su-ennuple">Calcolo relazione su ennuple</h3>
<p>Le interrogazione hanno la seguente forma</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>riga.attributo</mtext><mi mathvariant="normal">∣</mi><mtext>formule</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{riga.attributo}|\text{formule}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">riga.attributo</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">formule</span></span><span class="mclose">}</span></span></span></span></span></span></p>
<p>Le formule possono essere:</p>
<ul>
<li>
<p>Formule di tipo<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>t</mtext><mo>∈</mo><mtext>Studenti</mtext></mrow><annotation encoding="application/x-tex">\text{t} \in \text{Studenti}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.65418em; vertical-align: -0.0391em;"></span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di confronto tra valori e fra costanti<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>t.Matricola&nbsp;=&nbsp;e.Candidato</mtext></mrow><annotation encoding="application/x-tex">\text{t.Matricola = e.Candidato}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">t.Matricola&nbsp;=&nbsp;e.Candidato</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>t.Provincia&nbsp;=&nbsp;’VE’</mtext></mrow><annotation encoding="application/x-tex">\text{t.Provincia = 'VE'}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">t.Provincia&nbsp;=&nbsp;’VE’</span></span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di restrizione<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t</mtext><mi mathvariant="normal">∣</mi><mtext>t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∧</mo><mtext>t.Provincia&nbsp;=&nbsp;’VE’</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t}| \text{t} \in \text{Studenti}\land \text{t.Provincia = 'VE'}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">t.Provincia&nbsp;=&nbsp;’VE’</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di proiezione<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t.Nome,&nbsp;t.Cognome</mtext><mi mathvariant="normal">∣</mi><mtext>t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t.Nome, t.Cognome}| \text{t} \in \text{Studenti}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t.Nome,&nbsp;t.Cognome</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di ridenominazione<br>
ridenominazione dell’attributo A in B nella tabella con i seguenti attributi <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A, C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span><br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t</mtext><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∃</mi><mtext>u</mtext><mo>∈</mo><mi>R</mi><mo>:</mo><mtext>t.B&nbsp;=&nbsp;u.A</mtext><mo>∧</mo><mtext>t.C&nbsp;=&nbsp;u.C</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t} |\exist \text{u} \in R : \text{t.B = u.A} \land \text{t.C = u.C}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t</span></span><span class="mord">∣∃</span><span class="mord text"><span class="mord">u</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">t.B&nbsp;=&nbsp;u.A</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">t.C&nbsp;=&nbsp;u.C</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di unione<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t</mtext><mi mathvariant="normal">∣</mi><mtext>t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∨</mo><mtext>t</mtext><mo>∈</mo><mtext>Docenti</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{ \text{t}|\text{t}\in \text{Studenti}\lor \text{t} \in \text{Docenti}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.65418em; vertical-align: -0.0391em;"></span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Docenti</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di differenza<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t</mtext><mi mathvariant="normal">∣</mi><mtext>t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∧</mo><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mtext>Docenti</mtext><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t}| \text{t} \in \text{Studenti}\land \lnot (t \in \text{Docenti})\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">¬</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Docenti</span></span><span class="mclose">)}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di prodotto<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t,&nbsp;e|&nbsp;t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∧</mo><mi>e</mi><mo>∈</mo><mtext>Docenti</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t, e| t} \in \text{Studenti}\land e\in \text{Docenti}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t,&nbsp;e|&nbsp;t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Docenti</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di intersezione<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>t|&nbsp;t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∧</mo><mtext>t</mtext><mo>∈</mo><mtext>Docenti</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t| t} \in \text{Studenti}\land \text{t} \in \text{Docenti}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t|&nbsp;t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.65418em; vertical-align: -0.0391em;"></span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Docenti</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di giunzione<br>
giunzione tra <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A,B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span><span class="mclose">)</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(C,D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">D</span><span class="mclose">)</span></span></span></span></span><br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>r,s|&nbsp;r</mtext><mo>∈</mo><mtext>R</mtext><mo>∧</mo><mi>s</mi><mo>∈</mo><mtext>S</mtext><mo>∧</mo><mtext>r.B&nbsp;=&nbsp;s.C</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{r,s| r} \in \text{R}\land s \in \text{S}\land \text{r.B = s.C}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">r,s|&nbsp;r</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">R</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">S</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">r.B&nbsp;=&nbsp;s.C</span></span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
<li>
<p>Formule di giunzione naturale<br>
giunzione tra <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A,B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span><span class="mclose">)</span></span></span></span></span> e <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(B,C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span><br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">{</mo><mtext>r.A,&nbsp;r.B,s.C</mtext><mi mathvariant="normal">∣</mi><mi>r</mi><mo>∈</mo><mtext>R</mtext><mo>∧</mo><mi>s</mi><mo>∈</mo><mtext>S</mtext><mo>∧</mo><mi>r</mi><mi mathvariant="normal">.</mi><mi>B</mi><mo>=</mo><mi>s</mi><mi mathvariant="normal">.</mi><mi>C</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{r.A, r.B,s.C}| r \in \text{R}\land s \in \text{S}\land r.B = s.C\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">r.A,&nbsp;r.B,s.C</span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">R</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">S</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">r</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mclose">}</span></span></span></span></span></span></p>
</li>
</ul>
<p>Esempio di interrogazione con calcolo relazionale su ennuple<br>
“ottenere nome e cognome degli studenti che hanno superato almeno un esame”</p>
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mtext>t.Nome,&nbsp;t.Cognome&nbsp;|&nbsp;t</mtext><mo>∈</mo><mtext>Studenti</mtext><mo>∧</mo><mi mathvariant="normal">∃</mi><mi>e</mi><mo>∈</mo><mtext>Esami&nbsp;:&nbsp;(t.Matricola</mtext><mo>=</mo><mi>e</mi><mi mathvariant="normal">.</mi><mtext>Candidato</mtext><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\text{t.Nome, t.Cognome |  } \text{t}\in \text{Studenti} \land \exist e \in \text{Esami : (t.Matricola} = e.\text{Candidato})\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mord text"><span class="mord">t.Nome,&nbsp;t.Cognome&nbsp;|&nbsp;</span></span><span class="mord text"><span class="mord">t</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord">Studenti</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73354em; vertical-align: -0.0391em;"></span><span class="mord">∃</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">Esami&nbsp;:&nbsp;(t.Matricola</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord text"><span class="mord">Candidato</span></span><span class="mclose">)}</span></span></span></span></span></p>
<h1 id="linguaggio-sql">Linguaggio SQL</h1>
<p>SQL (<em>Structured Query Language</em>) è un linguaggio dichiarativo che serve per interrogare una base di dati. È suddiviso in due parti principali:</p>
<ul>
<li><strong>DML (Data Manipulation Language)</strong>: Per leggere, inserire, modificare e cancellare dei dati (<strong>SELECT</strong>,  <strong>INSERT</strong>,  <strong>UPDATE</strong>,  <strong>DELETE</strong>).</li>
<li><strong>DDL (Data Definition Language)</strong>: Per la definizione della struttura del database, delle regole di integrità e amministrazione (<strong>CREATE</strong>,  <strong>ALTER</strong>,  <strong>DROP</strong>).</li>
</ul>
<h1 id="dml-1">DML</h1>
<p>Generalmente in questa categoria andiamo a fare delle operazioni su delle tabelle in input e in output viene restituita una tabella.</p>
<p>Le query si baseranno sul seguente esempio</p>
<p><img src="https://i.ibb.co/92qdhR2/image.png" alt="enter image description here"></p>
<h2 id="select">Select</h2>
<p>Il comando <strong>select</strong> serve per selezionare un sottoinsieme di attributi di una tabella.<br>
La struttura generale è la seguente:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>attributi<span class="token operator">&gt;</span>
<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>tabelle<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>condizioni<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Esempi</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> Matricola
<span class="token keyword">FROM</span> Studenti<span class="token punctuation">;</span>
</code></pre>
<p>La clausola <strong>where</strong> serve per applicare una restrizione ai dati</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Esami
<span class="token keyword">WHERE</span> Voto <span class="token operator">&gt;</span> <span class="token number">26</span><span class="token punctuation">;</span>
</code></pre>
<p>(l’asterico significa seleziona tutti gli attributi della tabella)</p>
<p>Possiamo utilizzare la keyword <strong>DISTINCT</strong> per rimuovere i duplicati dalle righe</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> Provincia
<span class="token keyword">FROM</span> Studenti<span class="token punctuation">;</span>
</code></pre>
<h2 id="giunzione-1">Giunzione</h2>
<p>Vediamo i vari modi di fare giunzioni tra tabelle in SQL:</p>
<h3 id="prodotto-cartesiano-1">Prodotto cartesiano</h3>
<p>È possibile combinare tutte le righe di due tabelle (prodotto cartesiano) semplicemente facendo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti<span class="token punctuation">,</span> Esami<span class="token punctuation">;</span>
</code></pre>
<p>oppure più esplicitamente</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> Esami<span class="token punctuation">;</span>
</code></pre>
<h3 id="giunzione-classica">Giunzione classica</h3>
<p>Realizzata con il comando <code>INNER JOIN</code> o più semplicemente <code>JOIN</code> si fa nel seguente modo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">JOIN</span> Esami <span class="token keyword">ON</span> Matricola <span class="token operator">=</span> Candidato<span class="token punctuation">;</span>
</code></pre>
<h3 id="natural-join">Natural join</h3>
<p>La join naturale si fa nel seguente modo</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> Esami<span class="token punctuation">;</span>
</code></pre>
<p>È possibile specificare le colonne su cui effettuare la natural join utilizzando la keyword <code>USING()</code> specificando al suo interno le colonne.</p>
<h3 id="left-right-e-full-outer-join">left, right e full outer join</h3>
<p>left join:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> Esami<span class="token punctuation">;</span>
</code></pre>
<p>right join:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> Esami<span class="token punctuation">;</span>
</code></pre>
<p>full outer join:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti <span class="token keyword">FULL</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> Esami<span class="token punctuation">;</span>
</code></pre>
<h2 id="notazione-con-il-punto">Notazione con il punto</h2>
<p>Quando si lavora con più di una tabella spesso è conveniente (in altri casi è necessario) specificare la tabella a cui si riferisce l’attributo.<br>
Per fare ciò utilizziamo la seguente sintassi</p>
<p><code>Tabella.Attributo</code></p>
<p>Es. generare una tabella che riporti Codice, Nome, Cognome dei docenti e Codice degli esami corrispondenti</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Docenti<span class="token punctuation">.</span>CodDoc<span class="token punctuation">,</span> Docenti<span class="token punctuation">.</span>Nome<span class="token punctuation">,</span> Docenti<span class="token punctuation">.</span>Cognome<span class="token punctuation">,</span> Esami<span class="token punctuation">.</span>Codice
<span class="token keyword">FROM</span> Esami <span class="token keyword">JOIN</span> Docenti <span class="token keyword">ON</span> Docenti<span class="token punctuation">.</span>CodDoc <span class="token operator">=</span> Esami<span class="token punctuation">.</span>CodDoc<span class="token punctuation">;</span>
</code></pre>
<p>In quel esempio sia <code>Docenti</code> che <code>Esami</code> hanno una colonna chiamata <code>CodDoc</code> quindi è necessario specificare la tabella a cui si riferisce l’attributo.</p>
<h2 id="alias">Alias</h2>
<p>Possiamo attribuire degli alias alle tabelle della clausola <code>FROM</code> questo torna particolarmente utile per migliorare la leggibilità delle query. Quando si lavora con tabelle ricorsive è necessario utilizzare gli alias.</p>
<p>Es. generare una tabella che contenga cognomi e matricole degli studenti e dei loro tutor</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>Cognome<span class="token punctuation">,</span> s<span class="token punctuation">.</span>Matricola<span class="token punctuation">,</span> t<span class="token punctuation">.</span>Cognome<span class="token punctuation">,</span> t<span class="token punctuation">.</span>Matricola
<span class="token keyword">FROM</span> Studenti s <span class="token keyword">JOIN</span> Studenti t <span class="token keyword">ON</span> s<span class="token punctuation">.</span>Tutor <span class="token operator">=</span> t<span class="token punctuation">.</span>Matricola<span class="token punctuation">;</span>
</code></pre>
<h2 id="ridenominazione-1">Ridenominazione</h2>
<p>Possiamo ridenominare le nostre colonne nella clausola <code>SELECT</code>, questo torna utile per rendere la tabella di output più chiara.<br>
Viene utilizzata la <em>keyword</em> <strong>AS</strong> e può essere usato per rinominare un attributo, un attributo calcolato oppure una funzione</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> date_part<span class="token punctuation">(</span>‘year’<span class="token punctuation">,</span> <span class="token keyword">current_date</span><span class="token punctuation">)</span> <span class="token operator">-</span> Nascita <span class="token keyword">AS</span> Età
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Provincia <span class="token operator">=</span> ’VE’<span class="token punctuation">;</span>
</code></pre>
<p>Come si vede abbiamo un campo calcolato <code>date_part(‘year’, current_date) - Nascita</code> che possiamo chiamare semplicemente <code>Età</code></p>
<h2 id="funzioni-di-aggregazione-1">Funzioni di aggregazione</h2>
<p>Le funzioni di aggregazione prendono in input tutte le righe di una o più colonne e restituiscono una riga oppure nessuna. Alcuni esempi di queste funzioni sono:</p>
<ul>
<li><strong>COUNT()</strong>: conta il numero di righe che non sono <code>NULL</code> (se tutte le righe sono <code>NULL</code> allora ritorna zero)</li>
<li><strong>SUM()</strong>: somma i valori numerici delle righe (se tutte le righe sono <code>NULL</code> allora ritorno <code>NULL</code>)</li>
<li><strong>AVG()</strong>: media dei valori numerici delle righe (se tutte le righe sono <code>NULL</code> allora ritorno <code>NULL</code>)</li>
<li><strong>MIN()</strong>: restituisce il minimo valore numerico delle righe (se tutte le righe sono <code>NULL</code> allora ritorno <code>NULL</code>)</li>
<li><strong>MAX()</strong>: restituisce il massimo valore numerico delle righe (se tutte le righe sono <code>NULL</code> allora ritorno <code>NULL</code>)</li>
</ul>
<p>Queste funzioni possono solo essere utilizzate nel <code>SELECT</code> oppure nel <code>HAVING</code> ma <strong>non</strong> nel <code>WHERE</code></p>
<h2 id="order-by">Order by</h2>
<p>Tramite il comando <code>ORDER BY</code> è possibile ordinare i risultati di una query seguendo un ordine lessicografico.<br>
L’ordinamento crescente si specifica con <code>ASC</code>, ed è impostato di default, mentre l’ordinamento decrescente si specifica con <code>DESC</code></p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Provincia <span class="token operator">=</span> <span class="token string">'Ve'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> Cognome <span class="token keyword">DESC</span><span class="token punctuation">,</span> Nome <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre>
<p>In questa query le righe vengono prima ordinate per cognome in ordine decrescente, e nel caso di righe con cognomi uguali si ordina per nome in ordine decrescente.</p>
<h2 id="operatori-insiemistici">Operatori insiemistici</h2>
<p>SQL permette di fare le basilari operazioni tra gli insiemi: unione, intersezione e differenza.<br>
Nota che è fondamentale che le colonne abbiano lo stesso nome e tipo per poter funzionare.</p>
<h3 id="unione">Unione</h3>
<p>Es. Nome, cognome e matricola degli studenti di Venezia e di quelli che hanno preso più di 28 in qualche esame</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> Matricola
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Provincia <span class="token operator">=</span> <span class="token string">'Ve'</span>
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> Matricola
<span class="token keyword">FROM</span> Studenti <span class="token keyword">JOIN</span> Esami <span class="token keyword">ON</span> Matricola <span class="token operator">=</span> candidato
<span class="token keyword">WHERE</span> Voto <span class="token operator">&gt;</span> <span class="token number">28</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="differenza">Differenza</h3>
<p>Es. Le matricole degli studenti che non sono tutor</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Matricola
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">Except</span>
<span class="token keyword">SELECT</span> Tutor <span class="token keyword">AS</span> Matricola
<span class="token keyword">FROM</span> Studenti<span class="token punctuation">;</span>
</code></pre>
<h3 id="intersezione-1">Intersezione</h3>
<p>Es. Nome e cognome degli studenti che hanno preso in un esame 18 e in un altro esame 30</p>
<p>Nota che è importante selezionare anche la Matricola per poter identificare le righe (anche se non è esplicitamente richiesto dalla consegna)</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> Matricola
<span class="token keyword">FROM</span> Studenti <span class="token keyword">JOIN</span> Esami <span class="token keyword">ON</span> Matricola <span class="token operator">=</span> Candidato
<span class="token keyword">WHERE</span> Voto <span class="token operator">=</span> <span class="token number">18</span>
<span class="token keyword">INTERSECT</span>
<span class="token keyword">SELECT</span> Nome<span class="token punctuation">,</span> Cognome<span class="token punctuation">,</span> Matricola
<span class="token keyword">FROM</span> Studenti <span class="token keyword">JOIN</span> Esami <span class="token keyword">ON</span> Matricola <span class="token operator">=</span> Candidato
<span class="token keyword">WHERE</span> Voto <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="il-valore-null">Il valore NULL</h2>
<p>Il valore NULL si utilizza quando non si hanno informazioni a sufficienza per determinare il valore della colonna.</p>
<p>È importante <strong>non utilizzare l’uguale per comparare un valore con NULL</strong>.<br>
NULL introduce un altro valore logico oltre a <code>true</code> e <code>false</code>, che è <code>unknown</code>.<br>
<code>NULL = 0</code> restituisce <code>unknown</code>.</p>
<p>Vediamo le tabelle di verità con il valore unknown:</p>
<p>Negazione:</p>

<table>
<thead>
<tr>
<th>p</th>
<th><span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">¬</mi></mrow><annotation encoding="application/x-tex">\lnot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord">¬</span></span></span></span></span>p</th>
</tr>
</thead>
<tbody>
<tr>
<td>U</td>
<td>U</td>
</tr>
</tbody>
</table><p>operazioni di AND e OR</p>

<table>
<thead>
<tr>
<th align="center">p</th>
<th align="center">q</th>
<th align="center">p <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∧</mo></mrow><annotation encoding="application/x-tex">\land</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.55556em; vertical-align: 0em;"></span><span class="mord">∧</span></span></span></span></span> q</th>
<th align="center">p <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∨</mo></mrow><annotation encoding="application/x-tex">\lor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.55556em; vertical-align: 0em;"></span><span class="mord">∨</span></span></span></span></span> q</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">T</td>
<td align="center">U</td>
<td align="center">U</td>
<td align="center">T</td>
</tr>
<tr>
<td align="center">F</td>
<td align="center">U</td>
<td align="center">F</td>
<td align="center">U</td>
</tr>
<tr>
<td align="center">U</td>
<td align="center">U</td>
<td align="center">U</td>
<td align="center">U</td>
</tr>
</tbody>
</table><p>Nei costrutti <code>WHERE</code> bisogna usare <code>IS</code> oppure <code>IS NOT</code> per il confronto con valori NULL</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Tutor <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre>
<p>È possibile utilizzare <code>expr IS [NOT] DISTINCT FROM expr</code> per paragonare due espressioni considerando anche NULL:<br>
Infatti ritorna vero se entrambi i valori sono diversi, oppure quando uno dei due è NULL<br>
mentre è falso se i due valori sono uguali oppure quando entrambi sono NULL</p>
<p>È possibile anche utilizzare la funzione <code>COALESCE(expr1, expr2)</code> per attribuire un valore personalizzato al posto di NULL: la prima espressione della funzione dovrebbe essere il valore della riga che ci interessa, se quel valore dovesse essere NULL, verrà utilizzato il prossimo valore non null specificato come parametro.</p>
<h2 id="between">Between</h2>
<p>Possiamo utilizzare la clausola <code>Between</code> per verificare che un valore sia in un determinato range</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Matricola <span class="token operator">BETWEEN</span> <span class="token number">71000</span> <span class="token operator">AND</span> <span class="token number">72000</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="like">Like</h2>
<p>Questa clausola è molto utile per verificare se una stringa segue un determinato pattern</p>
<p>utilizziamo:</p>
<ul>
<li>“%” per indicare una sequenza di 0 o più caratteri</li>
<li>“_” per un singolo carattere</li>
</ul>
<p>Es. Studenti con il nome di almeno due caratteri che inizia per A</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Nome <span class="token operator">LIKE</span> <span class="token string">'A_%'</span>
</code></pre>
<h2 id="clausola-where">Clausola where</h2>
<p>Vediamo nel dettaglio cosa è possibile fare con la clausola <code>WHERE</code></p>
<p>Abbiamo visto l’utilizzo più semplice in cui <strong>si compara una espressione con un’altra</strong><br>
ma possiamo fare anche delle comparazioni <strong>tra una espressione e una sottoselect</strong>.<br>
In fine abbiamo delle keyword che ci permettono di esprimere espressioni universali ed esistenziali, che sono <strong>EXIST, IN, ANY, ALL</strong></p>
<h3 id="sottoselect">Sottoselect</h3>
<p>Vediamo subito un esempio di sottoselect</p>
<p>“Studenti che vivono nella stessa provincia dello studente con matricola 71346, escluso lo studente stesso”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>Matricola <span class="token operator">&lt;&gt;</span> <span class="token string">'71346'</span><span class="token punctuation">)</span> <span class="token operator">AND</span>
	   Provincia <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Provincia
				    <span class="token keyword">FROM</span> Studenti
					<span class="token keyword">WHERE</span> Matricola <span class="token operator">=</span> <span class="token string">'71346'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Fare le sottoselect non è molto elegante infatti in molti casi è possibile fare la stessa cosa tramite le giunzioni.</p>
<h3 id="universale-e-esistenziale">Universale e esistenziale</h3>
<p>Può capitare che nella clausola <code>where</code> venga richiesta la presenza di almeno un valore (esistenziale) oppure la presenza di solamente uno specifico valore (universale)</p>
<p>è importante considerare le seguenti proprietà:</p>
<ul>
<li><strong>esistenziale = universale negata</strong><br>
ad esempio: esiste un voto diverso da 30 (esistenziale) = Non tutti i voti sono uguali a 30 (universale)</li>
<li><strong>universale = esistenziale negata</strong><br>
ad esempio: Tutti i voti sono uguali a 30 (universale) = Non esiste un voto diverso da 30 (esistenziale)</li>
</ul>
<h3 id="exists">Exists</h3>
<p>L’utilizzo di <code>EXISTS</code> rappresenta <strong>l’esistenziale</strong>, segue la seguente forma:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>sottoselect<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>Nota 1: Quando si utilizza <code>EXISTS</code> è necessario avere una <strong>correlazione</strong> tra le <strong>tabelle</strong> della select <strong>esterna</strong> e le <strong>tabelle nella sottoselect</strong></li>
<li>Nota 2: non è importante cosa viene selezionato nella sottoselect</li>
</ul>
<p>esempio: “studenti con almeno un voto &gt; 27”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>
			  <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
			  <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato <span class="token operator">=</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">AND</span>
					<span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&gt;</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>(nota la correlazione tra tabella esterna <code>s</code> che viene usata nella sottoselect)</p>
<p>Spesso è possibile sostituire l’utilizzo della <code>EXISTS</code> con le giunzioni, la query precedente verrebbe così:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> s<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s <span class="token keyword">JOIN</span> Esami <span class="token keyword">ON</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato <span class="token operator">=</span> s<span class="token punctuation">.</span>Matricola
<span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>voto <span class="token operator">&gt;</span> <span class="token number">27</span><span class="token punctuation">;</span>
</code></pre>
<p>nota che il <code>DISTINCT</code> è fondamentale in quanto non vogliamo che uno stesso studente venga selezionato tante volte quanti sono i suoi esami &gt; 27, ma lo vogliamo selezionare solo una volta.</p>
<h3 id="any">ANY</h3>
<p>L’utilizzo di <code>ANY</code> rappresenta <strong>l’esistenziale</strong>, segue la seguente forma:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>expr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>comparativo<span class="token operator">&gt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>sottoselect<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Verifica se l’espressione soddisfa la comparazione con almeno un elemento della sottoselect</p>
<ul>
<li>Nota 1: Quando si utilizza <code>ANY</code> <strong>non è necessario</strong> avere una <strong>correlazione</strong> tra le tabelle della select esterna e le tabelle nella sottoselect</li>
<li>Nota 2: è importante cosa viene selezionato nella sottoselect</li>
<li>Nota 3: se la sottoselect è vuota restituisce falso</li>
</ul>
<p>realizziamo lo stesso esempio: “studenti con almeno un voto &gt; 27”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">=</span><span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato
					    <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
					    <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&gt;</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>La <code>ANY</code> e la <code>EXISTS</code> sono semanticamente equivalenti, la differenza sta nel fatto che nella <code>ANY</code> facciamo il confronto nel where esterno, mentre nell’<code>EXISTS</code> il confronto viene spostato nella where della sottoselect</p>
<p>la <code>ANY</code> restituisce:</p>
<ul>
<li>true: se esiste un valore che rende vero il confronto tra l’espressione e la sottoselect</li>
<li>false: se nella sottoselect tutti i valori non sono NULL ed non esiste nemmeno un valore che rende vero il confronto</li>
<li>unknown: se nella sottoselect ci sono valori NULL e per tutti i valori non null il confronto risulta falso</li>
</ul>
<h3 id="in">IN</h3>
<p>L’utilizzo di <code>IN</code> rappresenta <strong>l’esistenziale</strong>, segue la seguente forma:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>expr<span class="token operator">&gt;</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>sottoselect<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>La <code>IN</code> non è altro che una <code>=ANY</code></p>
<p>Infatti la precedente query la possiamo scrivere come</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato
					    <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
					    <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&gt;</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>si può utilizzare anche per verificare che una espressione sia contenuta in una lista di valori</p>
<p>es. “Gli studenti di Padova, Venezia e Belluno”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti
<span class="token keyword">WHERE</span> Provincia <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'PD'</span><span class="token punctuation">,</span> <span class="token string">'VE'</span><span class="token punctuation">,</span> <span class="token string">'BL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="not-exists">Not Exists</h3>
<p>L’utilizzo di <code>NOT EXISTS</code> rappresenta <strong>l’universale</strong>, segue la seguente forma:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>sottoselect<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Sfruttando la proprietà che abbiamo detto in precedenza possiamo rappresentare un universale facendo la negazione dell’esistenziale e negando anche la proprietà da verificare.</p>
<p>Vediamo un esempio:</p>
<p>“Gli studenti che hanno preso solo 30”</p>
<p>selezioniamo gli studenti che <strong>non</strong> hanno preso un voto <strong>diverso</strong> da 30</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>
				  <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
				  <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato <span class="token operator">=</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">AND</span> <span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&lt;&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="all">ALL</h3>
<p>L’utilizzo di <code>ALL</code> rappresenta <strong>l’universale</strong>, segue la seguente forma:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>expr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>comparativo<span class="token operator">&gt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>sottoselect<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>è il corrispettivo di <code>ANY</code> ma per l’universale.</p>
<ul>
<li>Nota 1: Quando si utilizza <code>ALL</code> è necessario avere una <strong>correlazione</strong> tra le <strong>tabelle</strong> della select <strong>esterna</strong> e le <strong>tabelle nella sottoselect</strong></li>
<li>Nota 3: se la sottoselect è vuota restituisce true</li>
</ul>
<p>Vediamo l’esempio precedente:</p>
<p>“Gli studenti che hanno preso solo 30”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">&lt;&gt;</span><span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato
					     <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
					     <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&lt;&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>la <code>ALL</code> restituisce:</p>
<ul>
<li>true: se tutti i valori della sottoselect sono diversi da NULL e ogni elemento della sottoselect rende vero il confronto</li>
<li>false: se esiste un elemento della sottoselect che rende falso il confronto</li>
<li>unknown: se nella sottoselect ci sono dei NULL e tutti quelli che non sono NULL rendono vero il confronto.</li>
</ul>
<p>Il fatto che, se la sottoselect restituisce tutti valori NULL allora l’universale restituisce true potrebbe non essere quello che vogliamo veramente:</p>
<p>La query precedente oltre a selezionare gli studenti che hanno preso solo 30, seleziona anche gli studenti che non hanno sostenuto alcun esame.<br>
Per poter selezionare esclusivamente gli studenti che hanno sostenuto almeno un esame dobbiamo modificare la query nel seguente modo</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Studenti s
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>
				  <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
				  <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato <span class="token operator">=</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">AND</span> <span class="token number">e</span><span class="token punctuation">.</span>Voto <span class="token operator">&lt;&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token operator">AND</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>
				  <span class="token keyword">FROM</span> Esami <span class="token number">e</span>
				  <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato <span class="token operator">=</span> s<span class="token punctuation">.</span>Matricola<span class="token punctuation">)</span>
</code></pre>
<h2 id="raggruppamento-1">Raggruppamento</h2>
<p>Con il raggruppamento creiamo dei gruppi composti da righe su cui possiamo fare delle operazioni mirate all’intero gruppo.</p>
<p>La forma di utilizzo è la seguente</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>condizione<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre>
<p>Dove <code>having</code> permette di fare delle operazioni sui gruppi, diversamente dalla clausola <code>WHERE</code> in questo caso è possibile usare le funzioni di aggregazione.</p>
<p>Vediamo subito un esempio:</p>
<p>“Per ogni materia, trovare nome della materia e voto medio degli esami in quella materia (selezionando solo le materie per le quali sono stati sostenuti più di tre esami)”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> <span class="token number">e</span><span class="token punctuation">.</span>Materia<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token number">e</span><span class="token punctuation">.</span>Voto<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> Esami <span class="token number">e</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token number">e</span><span class="token punctuation">.</span>Materia
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre>
<p>Nota che gli attributi che non sono argomento di una funzione di aggregazione nella <code>select</code> o nel <code>having</code>, vanno messi nel <code>GROUP BY</code></p>
<p>Mentre gli attributi presenti nelle funzioni di aggregazione non devono essere presenti nel group by.</p>
<h2 id="insert">INSERT</h2>
<p>Con il comando <code>INSERT INTO</code> possiamo aggiungere una riga ad una tabella. La sintassi è la seguente:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tabella<span class="token punctuation">(</span>colonna_1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> colonna_n<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>valore_1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> valore_n<span class="token punctuation">)</span>
</code></pre>
<p>Alternativamente è anche possibile inserire dei valori che sono il risultato di una <code>select</code>:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tabella<span class="token punctuation">(</span>nome<span class="token punctuation">,</span> cognome<span class="token punctuation">)</span>
	<span class="token keyword">SELECT</span> nome<span class="token punctuation">,</span> cognome <span class="token keyword">FROM</span> tabella
</code></pre>
<h2 id="delete">DELETE</h2>
<p>La <code>DELETE</code> serve per eliminare righe dalla tabella.<br>
La sintassi è la seguente:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tabella
<span class="token keyword">WHERE</span> condizione
</code></pre>
<p>Vengono eliminate le righe che rispettano la condizione.</p>
<p>Nota che fare:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tabella
</code></pre>
<p>cancella tutte le righe della tabella, la tabella rimane comunque presente.</p>
<h2 id="update">UPDATE</h2>
<p>Con <code>UPDATE</code> è possibile aggiornare i valori di una o più righe esistenti.<br>
La sintassi è la seguente:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">UPDATE</span> tabella
<span class="token keyword">SET</span> attributo_1<span class="token operator">=</span>valore_1<span class="token punctuation">,</span> attributo_n<span class="token operator">=</span>valore_n
<span class="token keyword">WHERE</span> condizione
</code></pre>
<h2 id="case-when-then-else">CASE WHEN THEN ELSE</h2>
<p>In sql abbiamo il corrispettivo del costrutto if-then-else della classica programmazione.<br>
La sintassi è la seguente:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CASE</span>
	<span class="token keyword">WHEN</span> condizione_1 <span class="token keyword">THEN</span> valore_1
	<span class="token keyword">WHEN</span> condizione_2 <span class="token keyword">THEN</span> valore_2
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">ELSE</span> valore_default
<span class="token keyword">END</span> <span class="token keyword">AS</span> alias
</code></pre>
<p>può avere vari utilizzi, ad esempio nella select:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> Matricola<span class="token punctuation">,</span>
	<span class="token keyword">CASE</span>  
		<span class="token keyword">WHEN</span> YEAR<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">-</span> Nascita <span class="token operator">&gt;=</span> <span class="token number">18</span>  <span class="token keyword">THEN</span>  <span class="token string">'Maggiorenne'</span>  
		<span class="token keyword">ELSE</span>  <span class="token string">'Minorenne'</span>  
	<span class="token keyword">END</span> <span class="token keyword">AS</span> maggiore_età
<span class="token keyword">FROM</span> Studenti<span class="token punctuation">;</span>
</code></pre>
<h1 id="ddl-1">DDL</h1>
<p><strong>DDL</strong> (<em>Data Definition Language</em>) è la parte del linguaggio SQL in cui si <strong>definisce la base di dati</strong></p>
<p>Questa parte comprende:</p>
<ul>
<li>Creare tabelle</li>
<li>Modificare la struttura delle tabelle</li>
<li>Definire i vincoli sugli attributi e tra le tabelle</li>
<li>Altre cose che non vedremo.</li>
</ul>
<h2 id="schemi">Schemi</h2>
<p>Uno schema rappresenta sostanzialmente un insieme di tabelle. Serve per creare un gruppo logico di tabelle</p>
<p>Possiamo creare un schema facendo</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> <span class="token operator">&lt;</span>nome_schema<span class="token operator">&gt;</span>
</code></pre>
<p>possiamo poi andare a creare le tabelle appartenente a questo schema.</p>
<p>eliminiamo lo schema tramite il comando:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">DROP</span> <span class="token keyword">SCHEMA</span> <span class="token operator">&lt;</span>nome_schema<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span> <span class="token operator">|</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">]</span>
</code></pre>
<p>Aggiungendo il <code>CASCADE</code> cancelliamo lo schema ed anche tutti gli eventuali riferimenti ad tabelle esterne allo schema.<br>
Aggiungendo il <code>RESTRICT</code> lo schema viene cancellato solo se non ci sono riferimenti (se ci sono viene generato un errore)</p>
<h2 id="tabelle">Tabelle</h2>
<p>Possiamo definire le tabelle come un insieme di attributi (colonne), e per ciascuna colonna va indicato:</p>
<ul>
<li>nome</li>
<li>tipo di dato, che può essere <strong>predefinito</strong> oppure <strong>definito dall’utente</strong> tramite il comando <code>CREATE DOMAIN</code></li>
</ul>
<p>Creiamo una tabella nel seguente modo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>nome_tabella<span class="token operator">&gt;</span><span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Cancelliamo una tabella nel seguente modo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>nome_tabella<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre>
<p>Possiamo modificare praticamente ogni aspetto di una tabella tramite il comando <code>ALTER TABLE</code>, possiamo per esempio:</p>
<ul>
<li>Aggiungere ed eliminare attributi</li>
<li>Modificare il tipo degli attributi</li>
<li>Aggiungere, rimuovere e modificare i vincoli</li>
</ul>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Studenti
	<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> Nazionalita <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> ‘Italiana’<span class="token punctuation">;</span>
</code></pre>
<h3 id="tipi-di-dato-predefiniti">Tipi di dato predefiniti</h3>
<p>Vediamo i più comuni tipi di dato predefiniti</p>
<ul>
<li>numerici
<ul>
<li><code>SMALLINT</code> intero a 16 bit</li>
<li><code>INTEGER</code> intero a 32 bit</li>
<li><code>FLOAT(n)</code>decimale dove <code>n</code> indica la precisione, che può arrivare fino a 64bit</li>
<li><code>REAL</code> decimale a 32 bit</li>
<li><code>NUMERIC(p, s)</code> decimale in cui <code>p</code> rappresenta il numero di cifre totali da cui è composto il numero, mentre <code>s</code> rappresenta quante delle cifre di <code>p</code> sono dedicate dopo la virgola.</li>
</ul>
</li>
<li>boolean
<ul>
<li>può contenere solo i valori: true, false, null</li>
<li><code>1, yes, y, t, true</code> vengono tradotti come <code>true</code></li>
<li><code>0, no, f, false</code> vengono tradotti come <code>false</code></li>
</ul>
</li>
<li>caratteri
<ul>
<li><code>CHAR(x)</code>contiene una stringa lunga <code>x</code> caratteri (se la stringa è più corta allora vengono aggiunti dei valori per riempire)</li>
<li><code>VARCHAR(x)</code> contiene una stringa di lunghezza variabile fino a <code>x</code> caratteri (se la stringa è più corta non vengono aggiunti dei valori di riempimento)</li>
<li><code>TEXT</code> contiene una stringa di lunghezza ipoteticamente senza limite</li>
</ul>
</li>
<li>temporali
<ul>
<li><code>DATE</code> contiene anno:mese:giorno</li>
<li><code>TIME</code> contiene ora:minuto:secondo</li>
<li><code>TIMESTAMP</code> combinazione di <code>DATE</code> e <code>TIME</code></li>
</ul>
</li>
<li>grandi insiemi di dati
<ul>
<li>in questi tipi di dati non è possibile fare operazioni e confronti</li>
<li><code>BLOB</code> binary large object</li>
<li><code>CLOB</code> character large object</li>
</ul>
</li>
</ul>
<p>Consideriamo a parte il tipo <code>SERIAL</code> utilizzato dal <em>dbms</em> per identificare in modo autonomo una riga.<br>
Ogni volta che si aggiunge una riga quel attributo viene automaticamente aggiornato.</p>
<h2 id="vincoli-1">Vincoli</h2>
<p>Sugli attributi possiamo specificare sia dei valori di default, tramite la keyword <code>DEFAULT</code> sia dei vincoli come:</p>
<ul>
<li><code>NOT NULL</code> se l’attributo non può essere null</li>
<li><code>UNIQUE</code> se l’attributo deve essere unico (ma può assumere il valore null)</li>
<li><code>PRIMARY KEY</code> l’attributo deve essere unico e non null</li>
<li><code>CHECK (&lt;condizione&gt;)</code> serve per fare un controllo sul valore che assume la colonna, per essere valido il valore deve soddisfare la condizione del check</li>
</ul>
<p>Abbiamo anche il vincolo di chiave esterna <code>FOREIGN KEY</code> che può essere accompagnata da un comportamento in caso di cancellazione e modifica del riferimento alla chiave primaria, tali comportamenti sono:</p>
<ul>
<li><code>NO ACTION</code> viene impedita la cancellazione o modifica della chiave primaria</li>
<li><code>SET NULL</code> viene settata la chiave esterna a null</li>
<li><code>SET DEFAULT</code> viene settata la chiave esterna al suo valore di default</li>
<li><code>CASCADE</code>la cancellazione o modifica della chiave primaria si propaga anche alle chiavi esterne</li>
</ul>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Studenti <span class="token punctuation">(</span>
	Nome <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	Cognome <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	Sesso CHAR<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span><span class="token punctuation">(</span>Sesso <span class="token operator">IN</span> <span class="token punctuation">(</span>‘M’<span class="token punctuation">,</span> ‘F’<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	Matricola CHAR<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	Nascita <span class="token keyword">DATE</span><span class="token punctuation">,</span>
	Provincia CHAR<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'VE'</span><span class="token punctuation">,</span>
	Tutor CHAR<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Tutor<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Studenti<span class="token punctuation">(</span>Matricola<span class="token punctuation">)</span>
		<span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>
		<span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="viste">Viste</h2>
<p>Le viste (<em>view</em>, oppure tabelle virtuali) sono delle tabelle temporanee generate da una query, utilizzate principalmente per realizzare in modo più ordinato query complesse (ma ha anche altri utilizzi).</p>
<p>Sostanzialmente è come dare un nome ad una query, essa infatti verrà ricalcolata ogni volta che si scrive il nome datogli.</p>
<p>Viene creata nel seguente modo</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token operator">&lt;</span>nome_vista<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>attributi<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span>
	<span class="token operator">&lt;</span><span class="token keyword">SELECT</span><span class="token operator">&gt;</span>
</code></pre>
<p>Vediamo due esempi in cui le view tornano molto utili per le query:</p>
<p>Esempio 1: “Trovare la media dei voti massimi ottenuti nelle varie province”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> ProvMax<span class="token punctuation">(</span>Provincia<span class="token punctuation">,</span> Max<span class="token punctuation">)</span> <span class="token keyword">AS</span>
	<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>Provincia<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token number">e</span><span class="token punctuation">.</span>Voto<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> Studenti s <span class="token keyword">JOIN</span> Esami <span class="token number">e</span> <span class="token keyword">ON</span> s<span class="token punctuation">.</span>Matricola <span class="token operator">=</span> <span class="token number">e</span><span class="token punctuation">.</span>Candidato
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s<span class="token punctuation">.</span>Provincia<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Max<span class="token punctuation">)</span> <span class="token keyword">FROM</span> ProvMax<span class="token punctuation">;</span>
</code></pre>
<p>creo prima la view che mi contiene i voti massimi per ogni provincia.<br>
Poi faccio una query in cui seleziono la media dei massimi</p>
<p>Esempio 2: “Le province dove la media dei voti degli studenti è la più alta”</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> ProvMedia <span class="token punctuation">(</span>Provincia<span class="token punctuation">,</span> Media<span class="token punctuation">)</span> <span class="token keyword">AS</span>
	<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>Provincia<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token number">e</span><span class="token punctuation">.</span>Voto<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> Studenti s <span class="token keyword">JOIN</span> Esami <span class="token number">e</span> <span class="token keyword">ON</span> s<span class="token punctuation">.</span>Matricola<span class="token operator">=</span><span class="token number">e</span><span class="token punctuation">.</span>Candidato
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s<span class="token punctuation">.</span>Provincia<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> Provincia<span class="token punctuation">,</span> Media
<span class="token keyword">FROM</span> ProvMedia
<span class="token keyword">WHERE</span> Media <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Media<span class="token punctuation">)</span>
				<span class="token keyword">FROM</span> ProvMedia<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>creo prima la view che mi contiene la media voti per ogni provincia.<br>
Poi faccio una query in cui seleziono le provincie in cui la media è uguale alla media più grande tra le provincie</p>
<h3 id="with">With</h3>
<p>Il costrutto <code>WITH</code> rappresenta una view utilizzabile solo una volta.</p>
<p>Si utilizza nel seguente modo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">WITH</span> ProvinceMedia <span class="token keyword">AS</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>Provincia<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token number">e</span><span class="token punctuation">.</span>Voto<span class="token punctuation">)</span> <span class="token keyword">AS</span> Media
	<span class="token keyword">FROM</span> Studenti s <span class="token keyword">JOIN</span> Esami <span class="token number">e</span> <span class="token keyword">ON</span> s<span class="token punctuation">.</span>Matricola<span class="token operator">=</span><span class="token number">e</span><span class="token punctuation">.</span>Candidato 	
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s<span class="token punctuation">.</span>Provincia
<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> Provincia<span class="token punctuation">,</span> Media
<span class="token keyword">FROM</span> ProvinceMedia
<span class="token keyword">WHERE</span> Media <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Media<span class="token punctuation">)</span>
				<span class="token keyword">FROM</span> ProvinceMedia
			  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="associazioni-simmetriche">Associazioni simmetriche</h2>
<p>Immaginiamo di avere la seguente relazione ricorsiva</p>
<p><img src="https://i.ibb.co/qF9GX3s/image.png" alt="enter image description here"></p>
<p>Quando andiamo ad inserire i dati nella tabella Fratelli, cosa andiamo a mettere?</p>
<ul>
<li>
<p>tutte le ennuple:<br>
quindi se abbiamo due fratelli con <code>id = 13</code> e <code>id = 21</code> inseriamo nella tabella fratelli sia (13, 21) che (21, 13)<br>
In questo modo abbiamo una <strong>ridondanza di informazioni</strong> e risulta intricato riuscire ad ottenere la lista di fratelli senza ripetizioni.<br>
si dovrebbe fare una cosa di questo tipo:</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> p1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> Persone p1 <span class="token keyword">JOIN</span> Fratelli <span class="token number">f</span> <span class="token keyword">ON</span> p1<span class="token punctuation">.</span>Id <span class="token operator">=</span> <span class="token number">f</span><span class="token punctuation">.</span>Id1 <span class="token keyword">JOIN</span> Persone p2 <span class="token keyword">ON</span> <span class="token number">f</span><span class="token punctuation">.</span>Id2 <span class="token operator">=</span> p2<span class="token punctuation">.</span>Id
<span class="token keyword">WHERE</span> <span class="token number">f</span><span class="token punctuation">.</span>Id1 <span class="token operator">&lt;</span> <span class="token number">f</span><span class="token punctuation">.</span>Id2
</code></pre>
<p>la condizione nel <code>where</code> ci garantisce l’assenza di ripetizioni.</p>
</li>
<li>
<p>una sola riga per coppia:<br>
In questo caso risolviamo la ridondanza di dati però complichiamo le query, ad esempio per ottenere tutti i fratelli di una persona (ad esempio la persona con id=21):</p>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> Persone p<span class="token punctuation">,</span> Fratelli <span class="token number">f</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token number">f</span><span class="token punctuation">.</span>Id1 <span class="token operator">=</span> <span class="token number">21</span> <span class="token operator">AND</span> <span class="token number">f</span><span class="token punctuation">.</span>Id2 <span class="token operator">=</span> p<span class="token punctuation">.</span>Id<span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span><span class="token number">f</span><span class="token punctuation">.</span>Id2 <span class="token operator">=</span> <span class="token number">21</span> <span class="token operator">AND</span> <span class="token number">f</span><span class="token punctuation">.</span>Id1 <span class="token operator">=</span> p<span class="token punctuation">.</span>Id<span class="token punctuation">)</span>
</code></pre>
</li>
</ul>

    </div>
  </div>
</body>

</html>
