<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2024-11-25_JavaScript nel browser</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#javascript-nel-browser">JavaScript nel browser</a>
<ul>
<li><a href="#javascript-in-html">JavaScript in HTML</a></li>
<li><a href="#dom">DOM</a></li>
<li><a href="#global-object">Global object</a></li>
<li><a href="#esecuzione-degli-script">Esecuzione degli script</a></li>
<li><a href="#eventi">Eventi</a></li>
<li><a href="#registrare-gli-event-listener">Registrare gli event listener</a></li>
<li><a href="#propagazione-degli-eventi-bubbling">Propagazione degli eventi (bubbling)</a></li>
<li><a href="#selezione-degli-elementi-html">Selezione degli elementi HTML</a></li>
<li><a href="#attraversamento-del-documento">Attraversamento del documento</a></li>
<li><a href="#manipolare-gli-attributi">Manipolare gli attributi</a></li>
<li><a href="#modificare-la-struttura-del-documento">Modificare la struttura del documento</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="javascript-nel-browser">JavaScript nel browser</h1>
<p>JavaScript è stato pensato fin dall’inizio per introdurre dei comportamenti dinamici nei browser, con il passare degli anni i browser sono diventati delle piattaforme capaci di ospitare ogni tipo di applicazione web, includendo features grafiche, video, audio, animazioni, storage, networking, ecc…</p>
<p>Vediamo come sono strutturate le pagine web e come JavaScript riesce ad interagire con esse.</p>
<h2 id="javascript-in-html">JavaScript in HTML</h2>
<p>Le pagine web sono scritte in HTML, per includere codice JavaScript in queste pagine si utilizza il tag <code>&lt;script&gt; &lt;/script&gt;</code> inserendo il codice direttamente tra i due tag, oppure mettendo l’indirizzo del file JavaScript nell’attributo <code>src</code>.</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scripts/my_script.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Al tag <code>&lt;script&gt;</code> è anche possibile aggiungere gli attributi booleani <code>defer</code> e <code>async</code> (che funzionano solamente quando lo script viene ottenuto usando <code>src</code>):</p>
<ul>
<li>
<p><code>defer</code>: attende che il documento HTML sia stato completamente caricato e renderizzato prima di eseguire lo script.</p>
<p>più script con attributo <code>defer</code> vengono eseguiti nell’ordine in cui appaiono nel documento</p>
</li>
<li>
<p><code>async</code>: esegue lo script appena possibile e contemporaneamente viene caricato e renderizzato l’HTML</p>
<p>più script con <code>async</code> vengono eseguiti nell’ordine in cui vengono caricati (quindi non necessariamente viene seguito l’ordine in cui appaiono nel documento)</p>
</li>
</ul>
<p>È importante sottolineare che più script possono vedere e usare funzioni, classi, costanti e variabili create dagli altri script, quindi è come se tutti gli script appartenessero ad uno script più grande che li contiene tutti.</p>
<h2 id="dom">DOM</h2>
<p>Il <strong>Document Object Model (DOM)</strong> rappresenta il documento HTML attualmente caricato e visualizzato nel browser. Fornisce anche un insieme di API che permettono di interagire e manipolare la struttura, lo stile e il contenuto del documento HTML.</p>
<p>I documenti HTML contengono una serie di tag innestati che formano una struttura ad albero.</p>
<p>Il DOM rispecchia questa struttura, creando un oggetto JavaScript corrispondente ad ogni tag HTML. Ad esempio il tag <code>&lt;body&gt;</code> è rappresentato dalla classe <code>HTMLBodyElement</code>.</p>
<p>Le DOM API includono metodi per creare nuovi elementi e inserirli all’interno dell’albero come figli di altri elementi, analogamente ci sono metodi per spostare e rimuovere elementi dall’albero. Tutte le modifiche avvengono in tempo reale nella pagina web.</p>
<h2 id="global-object">Global object</h2>
<p>Per ogni tab del browser c’è un singolo <em>global object</em> condiviso tra tutti gli script importati dalla pagina web.</p>
<p>Il global object è dove la standard library è definita. All’interno di tale oggetto è anche presente la proprietà <code>document</code>, che contiene la struttura della pagina web, e la proprietà <code>window</code> il cui valore è l’oggetto globale stesso, che contiene il <code>document</code> come una sua proprietà interna (<code>window.document</code>).</p>
<h2 id="esecuzione-degli-script">Esecuzione degli script</h2>
<p>Possiamo dividere l’esecuzione in due fasi:</p>
<ol>
<li>la prima consiste nel caricamento della pagina e l’esecuzione degli script, in questi ultimi spesso si modifica la pagina web, si definiscono classi e funzioni ma, più importante, si impostano dei <strong>gestori di eventi</strong>, cioè delle funzioni che vengono invocate in risposta ad un input utente (oppure tramite timer, attività in rete, caricamento di risorse, al verificarsi di errori, …)</li>
<li>nella seconda fase il codice JavaScript viene invocato tramite il verificarsi di eventi specificati nella prima fase.</li>
</ol>
<p>due particolari eventi sono:</p>
<ul>
<li><code>DOMContentLoaded</code>: si triggera quando il documento html è caricato</li>
<li><code>load</code>: si triggera quando le risorse esterne del documento sono caricate</li>
</ul>
<p>Spesso si utilizzano questi due eventi per poi impostare altri eventi sulla pagina interamente caricata.</p>
<h2 id="eventi">Eventi</h2>
<p>Il browser è in grado di generare degli eventi quando determinate cose accadono, ad esempio quando il cursore dell’utente va sopra qualche elemento, quando viene premuto un tasto sulla tastiera ecc…</p>
<p>Con JavaScript è possibile far invocare una o più funzioni quando accade un evento specifico.</p>
<p>Vediamo alcune terminologie specifiche legate agli eventi:</p>
<ul>
<li>
<p><em><em><em>Event type</em> / <em>Event name</em></em>:</em> è una stringa che specifica il tipo di evento, ad esempio “mouseover”, “keydown”, “load”.</p>
</li>
<li>
<p><em><strong>Event target</strong>:</em> è l’elemento della pagina web a cui viene associato l’evento, ad esempio un <code>&lt;button&gt;</code></p>
</li>
<li>
<p><em><em><em>Event handler</em> / <em>Event listener</em></em>:</em> è la funzione che viene eseguita quando un determinato evento si verifica su un determinato target.</p>
<p>Questa funzione non ha un ritorno e nel suo body si può riferire al target con <code>this</code> (non per le arrow function).</p>
</li>
<li>
<p><em><strong>Event object</strong></em>: è un oggetto che rappresenta l’evento e che viene passato come argomento alla funzione, questo oggetto contiene delle proprietà specifiche per l’evento che possono essere utilizzate dalla funzione.</p>
</li>
</ul>
<h2 id="registrare-gli-event-listener">Registrare gli event listener</h2>
<p>Ci sono due modi per registrare degli event listener:</p>
<ol>
<li>aggiungere un attributo direttamente nell’elemento HTML o sull’oggetto JS corrispondente</li>
<li>usare il metodo <code>addEventListener()</code> (tecnica preferibile)</li>
</ol>
<h3 id="aggiungere-gli-attributi">1 aggiungere gli attributi</h3>
<p>In questo modo si assegna la funzione ad una particolare proprietà, per convenzione le proprietà sono scritte tutte in minuscolo e sono formate da “on” seguito da un nome specifico per l’evento: <code>onclick</code>, <code>onchange</code>, <code>onload</code>.</p>
<pre class=" language-jsx"><code class="prism  language-jsx"><span class="token comment">// Set the onload property of the Window object to a function.</span>
<span class="token comment">// The function is the event handler: it is invoked when the document loads.</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
	<span class="token comment">// Look up a &lt;form&gt; element </span>
	<span class="token keyword">let</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"form#shipping"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token comment">// Register an event handler function on the form that will be invoked </span>
	<span class="token comment">// before the form is submitted. </span>
	form<span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// When the user submits the form </span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFormValid</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// assume isFormValid is defined</span>
			event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// if form input was invalid prevent submission</span>
		<span class="token punctuation">}</span> 
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>In questo esempio sono stati aggiunti due event linstener rispettivamente agli eventi <code>onload</code> e <code>onsubmit</code>.</p>
<p>Con questo modo ogni <em>event target</em> può avere associato al massimo una funzione per tipo di evento.</p>
<p>Si può direttamente scrivere codice JavaScript in risposta ad un evento mettendolo direttamente nel tag HTML:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>console.log(<span class="token punctuation">'</span>Thank you<span class="token punctuation">'</span>);<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Please Click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3 id="usare-il-metodo-addeventlistener">2 Usare il metodo addEventListener</h3>
<p>Questa tecnica è preferibile perché isola completamente il codice HTML dal codice JavaScript e permette di assegnare <strong>più listener ad un stesso tipo di evento nello stesso target</strong>.</p>
<p>Ogni oggetto che può essere il target di un evento possiede un metodo <code>addEventListener</code> che prende 3 argomenti:</p>
<ol>
<li>una stringa che rappresenta il tipo di evento</li>
<li>la funzione che deve essere invocata quando si triggera l’evento</li>
<li>(opzionale) un booleano oppure un oggetto contenente dei booleani per configurare l’evento più nel dettaglio:
<ul>
<li>se si specifica direttamente <code>true</code> è equivalente a mettere solamente <code>capture</code> a <code>true</code></li>
<li>altrimenti si crea un oggetto contenente le seguenti proprietà:
<ul>
<li>
<p><code>capture</code>:</p>
<ul>
<li><code>true</code>: Evento sarà ascoltato prima dai listener più esterni del target (dalla radice del DOM al target specifico).</li>
<li><code>false</code> (default): Evento viene ascoltato prima dal target e poi risale l’albero del DOM.</li>
</ul>
</li>
<li>
<p><code>once</code>:</p>
<p>Se <code>true</code>, il listener verrà eseguito <strong>solo una volta</strong>, e poi sarà automaticamente rimosso.</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mybutton<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">let</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#mybutton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  b<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Thanks again!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>In modo simmetrico esiste il metodo <code>removeEventListener</code> che prende gli stessi parametri e serve a rimuovere un event listener.</p>
<h2 id="propagazione-degli-eventi-bubbling">Propagazione degli eventi (bubbling)</h2>
<p>Quando un evento viene triggerato su un particolare elemento della pagina, il segnale si propaga attraverso l’albero del DOM, partendo dall’elemento <strong>target</strong> e <strong>risalendo verso i suoi genitori</strong> fino alla radice del documento (<code>document</code>).</p>
<p>Questo processo è chiamato <strong>event bubbling</strong>.</p>
<p>Si può interrompere la propagazione chiamando <code>stopPropagation()</code>.</p>
<p>Si può sfruttare questo comportamento per registrare degli eventi su un target più generale in comune, piuttosto che registrare tanti eventi su target singoli (ad esempio registrare l’evento “change” direttamente sul form piuttosto che su ogni elemento interno al form).</p>
<h2 id="selezione-degli-elementi-html">Selezione degli elementi HTML</h2>
<p>Tramite l’oggetto <code>document</code>, che rappresenta la pagina HTML, si può selezionare un determinato elemento nella pagina, creare ed eliminare elementi, modificarne gli attributi, attraversare genitori, figli e fratelli degli elementi, ecc…</p>
<p>L’oggetto document possiede i campi <code>head</code> e <code>body</code> per selezionare i rispettivi tag HTML <code>&lt;head&gt;</code> e <code>&lt;body&gt;</code>, ma mette a disposizione metodi per ottenere elementi in vari modi:</p>
<ul>
<li>
<p><code>querySelector()</code> e <code>querySelectorAll()</code> permettono di selezionare elementi che possiedono uno specifico <em><strong>CSS selector</strong></em> (il nome del tag, l’id o la classe CSS)</p>
<pre class=" language-jsx"><code class="prism  language-jsx"><span class="token comment">// Find the document element for the HTML tag with attribute id="spinner"</span>
<span class="token keyword">let</span> spinner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#spinner"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//return the first occurrence</span>
 
<span class="token comment">// Find all Element objects for &lt;h1&gt;, &lt;h2&gt;, and &lt;h3&gt; tags</span>
<span class="token keyword">let</span> titles <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"h1, h2, h3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//return all occurrences</span>
</code></pre>
<p>Nota: querySelectorAll ritorna un oggetto array-like, quindi navigabile con gli indici e anche con il ciclo for-of.</p>
</li>
<li>
<p><code>getElementById</code>, <code>getElementsByName</code>, <code>getElementsByTagName</code>, <code>getElementsByClassName</code></p>
<pre class=" language-jsx"><code class="prism  language-jsx"><span class="token comment">// Look up an element by id. The argument is just the id, without #</span>
<span class="token keyword">let</span> sect1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sect1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token comment">// Look up all elements (such as form checkboxes) that have a name="color" attribute.</span>
<span class="token keyword">let</span> colors <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// Look up all &lt;h1&gt; elements in the document.</span>
<span class="token keyword">let</span> headings <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// Look up all elements that have class "tooltip."</span>
<span class="token keyword">let</span> tooltips <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"tooltip"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre>
<p>Nota l’uso della ‘s’ su <code>Elements</code> per suggerire che viene ritornato un oggetto array-like con tutti gli elementi selezionati.</p>
</li>
</ul>
<p>È anche possibile invocare tali metodi su un elemento specifico invece che su <code>document</code>, in questo modo gli elementi ottenuti saranno solo quelli figli dell’elemento specificato.</p>
<h2 id="attraversamento-del-documento">Attraversamento del documento</h2>
<p>Dopo aver selezionato l’elemento di interesse possiamo voler navigare l’albero a partire da quel nodo, ad esempio visitando il padre, i figli e i fratelli.</p>
<p>Possiamo fare questa navigazione tramite delle proprietà presenti negli elementi:</p>
<ul>
<li><code>parentNode</code>: si riferisce all’elemento padre</li>
<li><code>children</code>: contiene la lista degli elementi figli</li>
<li><code>childElementCount</code>: il numero di elementi figli (equivalente a <code>children.length</code>)</li>
<li><code>firstElementChild</code>, <code>lastElementChild</code>: contengono rispettivamente il primo elemento figlio e l’ultimo (sono <code>null</code> se non ci sono figli)</li>
<li><code>nextElementSibling</code>, <code>previousElementSibling</code>: contengono rispettivamente il successivo elemento fratello e il precedente (sono <code>null</code> se non ci sono fratelli)</li>
</ul>
<pre class=" language-jsx"><code class="prism  language-jsx"><span class="token comment">// Recursively traverse the Document or Element e, invoking the function</span>
<span class="token comment">// f on e and on each of its descendants</span>
<span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
		<span class="token function">f</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>                              <span class="token comment">// Invoke f() on e </span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> child <span class="token keyword">of</span> e<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// Iterate over the children </span>
				<span class="token function">traverse</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// And recurse on each one </span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Tutte queste proprietà escludono nodi testuali presenti in HTML, tuttavia se si seleziona un elemento è possibile ottenere il testo che contiene, in 4 modi diversi:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ciao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Ciao <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Mondo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"ciao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"innerText:"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// "Ciao"</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"textContent:"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "CiaoMondo"</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"innerHTML:"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// "Ciao &lt;span style="display:none;"&gt;Mondo&lt;/span&gt;"</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"outerHTML:"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Output: "&lt;div id="ciao"&gt;Ciao &lt;span style="display:none;"&gt;Mondo&lt;/span&gt;&lt;/div&gt;"</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<ul>
<li><code>innerText</code>: Restituisce il <strong>testo visibile</strong> all’interno dell’elemento, escludendo gli elementi nascosti (ad esempio quelli con <code>display: none</code>).</li>
<li><code>textContent</code>: Restituisce tutto il testo contenuto nell’elemento, <strong>incluso il testo nascosto</strong> (ma senza i tag HTML).</li>
<li><code>innerHTML</code>: Restituisce l’intero contenuto HTML interno dell’elemento, <strong>compresi i tag</strong>.</li>
<li><code>outerHTML</code>: Restituisce l’intero contenuto HTML compreso l’elemento stesso, <strong>compresi i tag</strong>.</li>
</ul>
<h2 id="manipolare-gli-attributi">Manipolare gli attributi</h2>
<p>I tag HTML posso avere degli attributi che definiscono meglio il loro comportamento, ad esempio il tag <code>&lt;a&gt;</code> per inserire dei link nella pagina, utilizza l’attributo <code>href</code> per specificare la destinazione del link.</p>
<p>In JavaScript si possono manipolare anche questi attributi attraverso dei metodi:</p>
<ul>
<li><code>getAttribute()</code>: ottenere un attributo</li>
<li><code>setAttribute()</code>: impostare un attributo</li>
<li><code>hasAttribute()</code>: testare l’esistenza di un attributo</li>
<li><code>removeAttribute()</code>: rimuovere un attributo</li>
</ul>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myLink<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://www.example.com<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateLink<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Aggiorna Link<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>removeTarget<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Rimuovi Target<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
	<span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myLink"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> updateButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"updateLink"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> removeButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"removeTarget"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; "https://www.example.com"</span>
	
	updateButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    link<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token string">"https://www.google.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; "https://www.google.com"</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	removeButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        link<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Alcuni attributi dei tag HTML hanno un nome che è riservato in JavaScript, ad esempio l’attributo <code>class</code> in JavaScript diventa <code>className</code>.</p>
<p>In particolare l’attributo <code>class</code> in HTML è una stringa che contiene una serie di classi CSS separate da spazi. È comune su JavaScript voler aggiungere o rimuovere una singola classe agevolmente senza maneggiare l’intera stringa.</p>
<p>Per questo esiste la proprietà <code>classList</code> su cui è possibile chiamare i metodi:</p>
<ul>
<li><code>add()</code>: per aggiungere una classe</li>
<li><code>remove()</code>: per rimuovere una classe</li>
<li><code>contains()</code>: per verificare l’esistenza di una classe</li>
<li><code>toggle()</code>: per rimuovere se già presente o aggiungere se non presente</li>
</ul>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>square<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addClass<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Aggiungi Classe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>removeClass<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Rimuovi Classe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> addBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"addClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> removeBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"removeClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

addBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"border"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
removeBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"square"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="modificare-la-struttura-del-documento">Modificare la struttura del documento</h2>
<p>L’oggetto <code>document</code> fornisce dei metodi per creare nuovi elementi, e ogni elemento ha dei metodi per inserire, eliminare e rimpiazzare i nodi nell’albero.</p>
<p>È possibile creare nuovi elementi utilizzando il metodo <code>createElement()</code> e successivamente aggiungere altri elementi figli all’inizio o alla fine di questi ultimi tramite i metodi <code>prepend()</code> e <code>append()</code>, che servono rispettivamente per aggiungere contenuti all’inizio o alla fine.</p>
<p>Se si desidera inserire qualcosa in una posizione specifica, è necessario ottenere il riferimento a un nodo e utilizzare i metodi <code>before()</code> e <code>after()</code>.</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Paragrafo iniziale<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"container"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newParaBefore <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newParaBefore<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"Before"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newParaAfter <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newParaAfter<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"After"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newParaPrepend <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newParaPrepend<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"Prepend"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newParaAppend <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newParaAppend<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"Append"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> original <span class="token operator">=</span> container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">;</span>
original<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>newParaBefore<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Aggiungi prima del parafrafo iniziale</span>
original<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>newParaAfter<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// Aggiungi dopo il paragrafo iniziale</span>
container<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>newParaPrepend<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// aggiungi come primo elemento del container</span>
container<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>newParaAppend<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// aggiungi come ultimo elemento del container</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Risultato:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Prepend<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Before<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Paragrafo iniziale<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>After<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Append<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>È possibile rimuovere un elemento con il metodo <code>remove()</code> ed è possibile rimpiazzarlo con il metodo <code>replaceWith()</code></p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Paragrafo da eliminare<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Paragrafo iniziale<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"container"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newParaReplace <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newParaReplace<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"Questo paragrafo sostituisce il paragrafo iniziale"</span><span class="token punctuation">;</span>

container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span>newParaReplace<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>Risultato:</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Questo paragrafo sostituisce il paragrafo iniziale<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>

    </div>
  </div>
</body>

</html>
